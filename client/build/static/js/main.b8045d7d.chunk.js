(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{313:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(27),s=n.n(a),i=n(15),o=n(13),d=n(1),l=function(e){return Object(d.jsx)(d.Fragment,{})},u=n(3),_=n(4),b=n(6),j={cursor:"pointer"},m=function(e){var t=e.children,n=e.type,r=e.onClick,c=e.className,a=e.style;return Object(d.jsx)("button",{type:n,style:Object(u.a)(Object(u.a)({},j),a),className:"".concat(c),onClick:r,children:t})},p=n(33),O=n(42),f=n.n(O),h=n(19),x=n(152),v=n(8),g=n(7),I=n.n(g),N=n(10),y=n(138),D=n(317),w="PUSH_TOAST",C="REMOVE_TOAST",R="CLEAR_TOAST",B=n(20),E=n(137),S=n(67),k=n.n(S),A="/api",L=k.a.create({baseURL:A,responseType:"json"}),T="LOADING",M="END_LOADING",P=function(){return function(e){return e({type:T,payload:!0})}},F=function(){return function(e){return e({type:M,payload:!1})}},H=n(31),V="CREATE_BOARD",U="GET_BOARD",q="GET_ALL_BOARD_BY_USERID",G="CLEAN_CURRENTBOARD",W="JOIN_BOARD",Z="CHANGE_STATE",z="BAN_MEMBER",X="CHANGE_DESCRIPTION",Y="ADD_LIST",J="LEAVE_BOARD",K="DELETE_BOARD",Q="ADD_CARD",$="DELETE_LIST",ee="RENAME_LIST",te="REORDER_LIST",ne="ASSIGN_MEMBER",re="CHANGE_CARD_TITLE",ce="CHANGE_CARD_DESCRIPTION",ae="ADD_CARD_LABEL",se="DELETE_CARD_LABEL",ie="CHANGE_CARD_PICTURE",oe=function(e){return function(t){return L.get("/board/getallboardbyuserid/".concat(e)).then((function(e){var n=e.data;t({type:q,payload:n})})).catch((function(e){console.log(e)}))}},de=function(e,t,n){return function(){var r=Object(N.a)(I.a.mark((function r(c){var a;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=ye.getState().userReducer,r.abrupt("return",c({type:te,payload:{listsReorder:e,boardID:t,userID:n,currentUser:a}}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},le="LOGIN",ue="REMEMBER_ME",_e="ADD_NOTIFICATION",be="DELETE_NOTIFICATION",je=function(e,t,n){return function(r){var c={userID:e,notificationID:t,boardIDRequested:n};return L.post("/user/delete-notification",c).then((function(e){return r({type:be,payload:t})})).catch((function(e){console.log(e)}))}},me={};var pe={currentBoard:{},boards:[]};var Oe=[];var fe="REDIRECT",he="CLEAR_REDIRECT";var xe="OPEN_MODAL",ve="CLOSE_MODAL",ge={modalName:"",props:{}};var Ie=Object(B.combineReducers)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:case ue:return t.payload;case _e:var n=t.payload,r=n.findIndex((function(t){return t._id===e._id}));return-1===r?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{notifications:[].concat(Object(v.a)(e.notifications),[n[r].notifications])});case be:return Object(u.a)(Object(u.a)({},e),{},{notifications:e.notifications.filter((function(e){return e._id!==t.payload}))});default:return e}},boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:var n=e.boards?[].concat(Object(v.a)(e.boards),[t.payload]):[t.payload];return Object(u.a)(Object(u.a)({},e),{},{boards:n});case q:return Object(u.a)(Object(u.a)({},e),{},{boards:t.payload});case U:return Object(u.a)(Object(u.a)({},e),{},{currentBoard:t.payload});case G:return Object(u.a)(Object(u.a)({},e),{},{currentBoard:{}});case W:var r=e.boards.findIndex((function(e){return e._id===t.payload.board._id}));return t.payload.currentUser._id===t.payload.user._id?Object(u.a)(Object(u.a)({},e),{},{boards:[].concat(Object(v.a)(e.boards),[t.payload.board])}):t.payload.board._id===e.currentBoard._id&&-1!==r?Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{members:[].concat(Object(v.a)(e.currentBoard.members),[t.payload.user])}),boards:e.boards.map((function(e){return e._id===t.payload.board._id&&e.members.push(t.payload.user),e}))}):t.payload.board._id!==e.currentBoard._id&&-1!==r?Object(u.a)(Object(u.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.payload.board._id&&e.members.push(t.payload.user),e}))}):Object(u.a)({},e);case Z:return e.currentBoard._id!==t.payload.boardID||e.currentBoard.NOT_MEMBER?e.currentBoard._id===t.payload.boardID&&e.currentBoard.NOT_MEMBER?(document.location.reload(),Object(u.a)(Object(u.a)({},e),{},{currentBoard:{}})):Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{isPrivate:t.payload.state})});case z:return e.currentBoard._id===t.payload.boardID?(t.payload.memberBannedID===t.payload.currentUser._id&&document.location.reload(),Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{members:e.currentBoard.members.filter((function(e){return e._id!==t.payload.memberBannedID}))}),boards:e.boards.map((function(e){return e._id===t.payload.boardID?(e.members=e.members.filter((function(e){return e._id!==t.payload.memberBannedID})),e):e}))})):-1!==e.boards.findIndex((function(e){return e._id===t.payload.boardID}))&&t.payload.memberBannedID===t.payload.currentUser._id?Object(u.a)(Object(u.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.payload.boardID}))}):Object(u.a)({},e);case X:return e.currentBoard._id===t.payload.boardID?Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{description:t.payload.description})}):Object(u.a)({},e);case Y:return e.currentBoard._id!==t.payload.boardID||we(e.currentBoard)?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:[].concat(Object(v.a)(e.currentBoard.lists),[t.payload.listCreated])})});case Q:return e.currentBoard._id!==t.payload.boardID||we(e.currentBoard)?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.map((function(n){return e.currentBoard._id===t.payload.boardID&&n._id===t.payload.listID&&n.cards.push(t.payload.cardCreated),n}))})});case ee:return e.currentBoard._id!==t.payload.boardID?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.map((function(e){return e._id===t.payload.listID&&(e.name=t.payload.rename),e}))})});case te:return e.currentBoard._id!==t.payload.boardID||t.payload.currentUser._id===t.payload.userID?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:t.payload.listsReorder})});case $:return e.currentBoard._id!==t.payload.boardID||we(e.currentBoard)?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.filter((function(e){return e._id!==t.payload.listID}))})});case ne:return e.currentBoard._id!==t.payload.boardID?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.map((function(e){return e._id===t.payload.listID&&e.cards.forEach((function(e){e._id===t.payload.cardID&&(e.members=Object(v.a)(t.payload.assignedMembers))})),e}))})});case re:return e.currentBoard._id!==t.payload.boardID?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.map((function(e){return e._id===t.payload.listID&&e.cards.forEach((function(e){e._id===t.payload.cardID&&(console.log("CHANGE CARD TOTITLE"),e.title=t.payload.cardTitle)})),e}))})});case ce:return e.currentBoard._id!==t.payload.boardID?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.map((function(e){return e._id===t.payload.listID&&e.cards.forEach((function(e){e._id===t.payload.cardID&&(e.description=t.payload.description)})),e}))})});case ae:return e.currentBoard._id!==t.payload.boardID?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.map((function(e){return e._id===t.payload.listID&&e.cards.forEach((function(e){e._id===t.payload.cardID&&e.labels.push(t.payload.label)})),e}))})});case se:return e.currentBoard._id!==t.payload.boardID?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.map((function(e){return e._id===t.payload.listID&&e.cards.forEach((function(e){e._id===t.payload.cardID&&(e.labels=e.labels.filter((function(e){return e._id!==t.payload.labelID})))})),e}))})});case ie:return e.currentBoard._id!==t.payload.boardID?Object(u.a)({},e):Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.map((function(e){return e._id===t.payload.listID&&e.cards.forEach((function(e){e._id===t.payload.cardID&&(e.picture=t.payload.picture)})),e}))})});case J:return Object(u.a)(Object(u.a)({},e),{},{currentBoard:Object(u.a)(Object(u.a)({},e.currentBoard),{},{members:e.currentBoard.members.filter((function(n){return n._id!==t.payload.userID||e.currentBoard._id!==t.payload.boardID||(t.payload.currentUser._id===t.payload.userID&&document.location.reload(),!1)}))}),boards:e.boards.filter((function(e){return e._id!==t.payload.boardID||t.payload.currentUser._id!==t.payload.userID}))});case K:return Object(u.a)(Object(u.a)({},e),{},{currentBoard:e.currentBoard._id===t.payload.boardID?"BOARD_ERROR":Object(u.a)({},e.currentBoard),boards:e.boards.filter((function(e){return e._id!==t.payload.boardID}))});default:return Object(u.a)({},e)}},loaderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:case M:return t.payload;default:return e}},toastReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return[].concat(Object(v.a)(e),[t.payload]);case C:var n=t.payload;return e.filter((function(e){return e.id!==n}));case R:return e.filter((function(e){return!t.payload.includes(e.type)}));default:return e}},redirectReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:case he:return t.payload;default:return e}},modalReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return t.payload;case ve:return ge;default:return e}}}),Ne=n(139),ye=Object(B.createStore)(Ie,Object(E.composeWithDevTools)(Object(B.applyMiddleware)(Ne.a))),De=n(32),we=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},Ce=function(){var e=Object(N.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(new y.a).set("token",t,{maxAge:6048e5});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(e){for(var t in e)Be(Object(d.jsx)(De.b,{}),e[t],"danger")},Be=function(e,t,n){ye.dispatch(function(e,t,n){return function(r){var c=Object(D.a)();r({type:w,payload:{id:c,icon:e,info:t,type:n}}),setTimeout((function(){r({type:C,payload:c})}),6e3)}}(e,t,n))},Ee=function(e){ye.dispatch(function(e){return function(t){return t({type:R,payload:e})}}(e))},Se=function(e){Ee(["danger","warning"]),Be(Object(d.jsx)(De.b,{}),e,"warning")},ke=function(e){Ee(["danger","warning"]),Be(Object(d.jsx)(H.a,{}),e,"success")},Ae=function(e,t){switch(e){case"board":return"".concat(A,"/board-picture/").concat(t);case"user":return"".concat(A,"/user-picture/").concat(t);case"attachment":return"".concat(A,"/attachment/").concat(t);default:console.log("getPicturePath() -> Picture Path Error")}},Le=function(e){return e.replaceAll(/(<[^>]+) style=".*?"/gi,"")},Te=function(e,t){window.addEventListener("mousedown",(function(n){if(!e.current)return function(){return t(!1)};!e.current.contains(n.target)&&t(!1)}))},Me=function(e){return document.querySelector("[".concat("data-rbd-draggable-id","=").concat(e,"]"))},Pe=function(e){var t=e,n=t.substring(0,4),r="0"===t[5]?t.substring(6,7):t.substring(5,7),c=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1],a=t.substring(8,10),s=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][a];return{hour:t.substring(11,16),dayNum:a,dayLetter:s,monthNum:r,monthLetter:c,years:n}},Fe=function(e){var t,n,c,a,s,i=e.children,o=e.contentRef,l=e.contentClass,b=e.allowsRef,j=e.isOpen,m=e.setIsOpen,p=e.isResponsive,f=void 0!==p&&p,v=e.maxWidthResponsive,g=void 0===v?600:v,I=e.isVertical,N=void 0===I||I,y=e.title,D=e.description,w=e.top,C=e.right,R=e.bottom,B=e.left,E=e.topResponsive,S=e.rightResponsive,k=e.bottomResponsive,A=e.leftResponsive,L=Object(r.useRef)(),T=N?L:o,M=Object(O.useMediaQuery)({query:"(max-width: ".concat(g,"px)")}),P=Object(r.useState)(null),F=Object(_.a)(P,2),H=F[0],V=F[1],U=N?"maxHeight":"maxWidth",q=(t={transition:"".concat(300,"ms ease")},Object(h.a)(t,U,"0"),Object(h.a)(t,"overflow","hidden"),t),G={entering:(n={},Object(h.a)(n,U,"".concat(H,"px")),Object(h.a)(n,"overflow","hidden"),n),entered:(c={},Object(h.a)(c,U,"".concat(H,"px")),Object(h.a)(c,"overflow","visible"),c),exiting:(a={},Object(h.a)(a,U,"0"),Object(h.a)(a,"overflow","hidden"),a),exited:(s={},Object(h.a)(s,U,"0"),Object(h.a)(s,"overflow","hidden"),s)};return Object(r.useEffect)((function(){if(j){T.current&&V(N?T.current.getBoundingClientRect().height:T.current.getBoundingClientRect().width);var e=function(e){if(we(b)){if(!T.current)return m(!1);!T.current.contains(e.target)&&m(!1)}else{if(!T.current||!b.current)return m(!1);T.current.contains(e.target)||b.current.contains(e.target)||m(!1)}};if(window.addEventListener("mousedown",e),!T.current)return m(!1);j||window.removeEventListener("mousedown",e)}}),[j,m,T,N,b]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"dropdown ".concat(f&&M?"dropdown-responsive":""),style:f&&M?{top:E,right:S,bottom:k,left:A}:{top:w,right:C,bottom:R,left:B},children:Object(d.jsx)(x.a,{unmountOnExit:!0,in:j,timeout:300,children:function(e){return Object(d.jsx)("div",{className:"dropdown__content",style:Object(u.a)(Object(u.a)({},q),G[e]),children:Object(d.jsxs)("div",{className:"".concat(l),ref:N&&L,children:[y&&D&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{className:"dropdown__content__title",children:y}),Object(d.jsx)("span",{className:"dropdown__content__description",children:D})]}),i]})})}})})})},He=n(48),Ve=n(9),Ue=n(36),qe=n(318),Ge=n(47),We=function(e){var t=e.children,n=e.hasCloseButton,c=void 0!==n&&n,a=e.isOpen,s=e.setIsOpen,i=e.hasOverflowYScroll,o=void 0!==i&&i,l=e.hasChoiceButton,u=void 0!==l&&l,j=e.btnConfirmMessage,p=e.btnConfirmIcon,O=e.confirmMessage,f=e.confirmFunction,h=Object(r.useState)(!1),x=Object(_.a)(h,2),v=x[0],g=x[1],I=Object(r.useRef)(),N=Object(b.c)();return Object(r.useEffect)((function(){return document.querySelector("html").style=a?"overflow : hidden":"overflow : visible"}),[a]),Object(r.useEffect)((function(){var e=function(e){if(!I.current)return s(!1);I.current.contains(e.target)||s(!1)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e),document.querySelector("html").style="overflow : visible"}}),[s]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(qe.a,{in:a,classNames:"modal",appear:!0,timeout:200,onEntered:function(){return g(!0)},onExit:function(){return g(!1)},onExited:function(){var e;N((function(t){return t({type:ve,payload:e})})),s(!1)},unmountOnExit:!0,children:Object(d.jsx)("div",{className:"modal",style:{alignItems:o?"flex-start":"center"},children:Object(d.jsx)(qe.a,{in:v,classNames:"modalcontent",appear:!0,timeout:300,unmountOnExit:!0,children:Object(d.jsxs)("div",{ref:I,className:"modal__content",children:[c&&Object(d.jsx)(m,{className:"modal__content__close",onClick:function(){return s(!1)},children:Object(d.jsx)(Ge.b,{})}),t,u&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"modal__content__confirm-message",children:O}),Object(d.jsxs)("div",{className:"modal__content__btn-wrapper",children:[Object(d.jsx)(m,{className:"modal__content__btn-wrapper__cancel",onClick:function(){return s(!1)},children:"Cancel"}),Object(d.jsxs)(m,{className:"modal__content__btn-wrapper__confirm",onClick:f,children:[p&&Object(d.jsx)("span",{className:"modal__content__btn-wrapper__confirm__icon",children:p}),Object(d.jsx)("span",{className:"modal__content__btn-wrapper__confirm__label",children:j||"Confirm"})]})]})]})]})})})})})},Ze=n(141),ze=n(140),Xe=Object(ze.io)(""),Ye=function(e){var t=e.isOpen,n=e.setIsOpen,r=Object(b.d)((function(e){return e.userReducer})),c=Object(b.c)();return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(We,{isOpen:t,setIsOpen:n,hasCloseButton:!0,children:Object(d.jsxs)("div",{className:"profilmenu__notifications",children:[Object(d.jsxs)("span",{className:"profilmenu__notifications__top",children:[Object(d.jsx)(Ve.k,{className:"profilmenu__notifications__top__icon"}),"Notifications"]}),Object(d.jsx)("ul",{className:"profilmenu__notifications__list",children:we(r.notifications)?Object(d.jsx)("h4",{style:{textAlign:"center",marginTop:"20px"},children:"You don't have notifications"}):r.notifications.map((function(e){var t=e._id,n=e.title,a=e.message,s=e.boardIDRequested;return Object(d.jsxs)("li",{className:"profilmenu__notifications__list__item",children:[Object(d.jsxs)("div",{className:"profilmenu__notifications__list__item__right",children:[Object(d.jsx)(Ze.a,{className:"profilmenu__notifications__list__item__right__icon"}),Object(d.jsxs)("div",{className:"profilmenu__notifications__list__item__right__content",children:[Object(d.jsx)("span",{className:"profilmenu__notifications__list__item__right__content__title",children:n}),Object(d.jsx)("span",{className:"profilmenu__notifications__list__item__right__content__message",children:a})]})]}),Object(d.jsxs)("div",{className:"profilmenu__notifications__list__item__left",children:[Object(d.jsx)(m,{className:"profilmenu__notifications__list__item__left__btn-valid",onClick:function(){return function(e,t){var n={userID:r._id,boardID:e};Xe.emit("join board",n),c(je(r._id,t))}(s,t)},children:Object(d.jsx)(Ve.b,{})}),Object(d.jsx)(m,{className:"profilmenu__notifications__list__item__left__btn-wrong",onClick:function(){return c(je(r._id,t,s))},children:Object(d.jsx)(Ue.d,{})})]})]},t)}))})]})})})},Je=n(315),Ke=function(e){var t=e.isOpen,n=e.setIsOpen,c=Object(r.useState)(!1),a=Object(_.a)(c,2),s=a[0],i=a[1],o=Object(b.d)((function(e){return e.userReducer})),l=Object(Je.a)(),u=Object(_.a)(l,3)[2];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ye,{isOpen:s,setIsOpen:i}),Object(d.jsx)(Fe,{contentClass:"profilmenu",isOpen:t,setIsOpen:n,top:"60px",right:"10px",children:Object(d.jsx)("div",{children:Object(d.jsxs)("ul",{className:"profilmenu__navlist",children:[Object(d.jsx)("li",{children:Object(d.jsxs)("button",{className:"profilmenu__navlist__item",children:[Object(d.jsx)(He.a,{className:"profilmenu__navlist__item__icon"}),"Profil"]})}),Object(d.jsx)("li",{onClick:function(){return i(!0)},children:Object(d.jsxs)("button",{className:"profilmenu__navlist__item",children:[Object(d.jsx)(Ve.k,{className:"profilmenu__navlist__item__icon"}),"Notifications",!we(o.notifications)&&Object(d.jsx)("span",{className:"bubble-notifications",style:{fontSize:o.notifications.length>99&&"0.6rem"},children:o.notifications.length>99?"99+":o.notifications.length})]})}),Object(d.jsx)("li",{className:"profilmenu__navlist__divider"}),Object(d.jsx)("li",{children:Object(d.jsxs)("button",{className:"profilmenu__navlist__item",onClick:function(){u("token",{path:"/"}),document.location.reload()},children:[Object(d.jsx)(De.c,{className:"profilmenu__navlist__item__icon profilmenu__navlist__item__icon--logout"}),"Logout"]})})]})})})]})},Qe=function(e){var t=e.isHeaderBoard,n=e.boardName,c=Object(b.d)((function(e){return e.userReducer})),a=Object(r.useState)(!1),s=Object(_.a)(a,2),o=s[0],l=s[1],u=Object(r.useState)(!1),j=Object(_.a)(u,2),O=j[0],h=j[1],x=Object(r.useState)(1),v=Object(_.a)(x,2),g=v[0],I=v[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("header",{className:"header",children:[Object(d.jsxs)("div",{className:"header__left",children:[Object(d.jsxs)(i.b,{className:"header__left__logo",to:"/allboards",children:[Object(d.jsx)(f.a,{minWidth:"650px",children:Object(d.jsxs)("svg",{width:"98",height:"29",viewBox:"0 0 98 29",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(d.jsx)("path",{d:"M54.3311 8.436V10.47H50.9831V21H48.4631V10.47H45.1151V8.436H54.3311ZM61.1557 10.884C61.9117 10.884 62.5837 11.052 63.1717 11.388C63.7597 11.712 64.2157 12.198 64.5397 12.846C64.8757 13.482 65.0437 14.25 65.0437 15.15V21H62.5237V15.492C62.5237 14.7 62.3257 14.094 61.9297 13.674C61.5337 13.242 60.9937 13.026 60.3097 13.026C59.6137 13.026 59.0617 13.242 58.6537 13.674C58.2577 14.094 58.0597 14.7 58.0597 15.492V21H55.5397V7.68H58.0597V12.27C58.3837 11.838 58.8157 11.502 59.3557 11.262C59.8957 11.01 60.4957 10.884 61.1557 10.884ZM76.2241 11.028V21H73.6861V19.74C73.3621 20.172 72.9361 20.514 72.4081 20.766C71.8921 21.006 71.3281 21.126 70.7161 21.126C69.9361 21.126 69.2461 20.964 68.6461 20.64C68.0461 20.304 67.5721 19.818 67.2241 19.182C66.8881 18.534 66.7201 17.766 66.7201 16.878V11.028H69.2401V16.518C69.2401 17.31 69.4381 17.922 69.8341 18.354C70.2301 18.774 70.7701 18.984 71.4541 18.984C72.1501 18.984 72.6961 18.774 73.0921 18.354C73.4881 17.922 73.6861 17.31 73.6861 16.518V11.028H76.2241ZM80.6005 7.68V21H78.0805V7.68H80.6005ZM84.9803 7.68V21H82.4603V7.68H84.9803ZM91.268 21.162C90.308 21.162 89.444 20.952 88.676 20.532C87.908 20.1 87.302 19.494 86.858 18.714C86.426 17.934 86.21 17.034 86.21 16.014C86.21 14.994 86.432 14.094 86.876 13.314C87.332 12.534 87.95 11.934 88.73 11.514C89.51 11.082 90.38 10.866 91.34 10.866C92.3 10.866 93.17 11.082 93.95 11.514C94.73 11.934 95.342 12.534 95.786 13.314C96.242 14.094 96.47 14.994 96.47 16.014C96.47 17.034 96.236 17.934 95.768 18.714C95.312 19.494 94.688 20.1 93.896 20.532C93.116 20.952 92.24 21.162 91.268 21.162ZM91.268 18.966C91.724 18.966 92.15 18.858 92.546 18.642C92.954 18.414 93.278 18.078 93.518 17.634C93.758 17.19 93.878 16.65 93.878 16.014C93.878 15.066 93.626 14.34 93.122 13.836C92.63 13.32 92.024 13.062 91.304 13.062C90.584 13.062 89.978 13.32 89.486 13.836C89.006 14.34 88.766 15.066 88.766 16.014C88.766 16.962 89 17.694 89.468 18.21C89.948 18.714 90.548 18.966 91.268 18.966Z",fill:"#333333",className:"header__left__logo__label"}),Object(d.jsx)("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H10C12.2091 0 14 1.79086 14 4V25C14 27.2091 12.2091 29 10 29H4C1.79086 29 0 27.2091 0 25V4Z",fill:"#2F80ED",className:"header__left__logo__left"}),Object(d.jsx)("path",{d:"M18 4C18 1.79086 19.7909 0 22 0H28C30.2091 0 32 1.79086 32 4V14C32 16.2091 30.2091 18 28 18H22C19.7909 18 18 16.2091 18 14V4Z",fill:"#2F80ED",className:"header__left__logo__right"})]})}),Object(d.jsx)(f.a,{maxWidth:"649px",children:Object(d.jsxs)("svg",{width:"32",height:"29",viewBox:"0 0 32 29",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(d.jsx)("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H10C12.2091 0 14 1.79086 14 4V25C14 27.2091 12.2091 29 10 29H4C1.79086 29 0 27.2091 0 25V4Z",fill:"#2F80ED",className:"header__left__logo__left"}),Object(d.jsx)("path",{d:"M18 4C18 1.79086 19.7909 0 22 0H28C30.2091 0 32 1.79086 32 4V14C32 16.2091 30.2091 18 28 18H22C19.7909 18 18 16.2091 18 14V4Z",fill:"#2F80ED",className:"header__left__logo__right"})]})})]}),t&&Object(d.jsxs)("div",{className:"header__left__board",children:[Object(d.jsx)("h2",{className:"header__left__board__name",children:n}),Object(d.jsx)("span",{className:"header__left__board__divider"}),Object(d.jsxs)(i.b,{to:"/allboards",className:"header__left__board__btn-allboard",children:[Object(d.jsx)(p.c,{className:"header__left__board__btn-allboard__icons"}),Object(d.jsx)("span",{className:"header__left__board__btn-allboard__label",children:"All board"})]})]})]}),Object(d.jsxs)("div",{className:"header__right",children:[Object(d.jsx)(f.a,{minWidth:"1100px",children:Object(d.jsxs)("div",{className:"header__right__search",children:[Object(d.jsx)("input",{className:"header__right__search__input",type:"text",placeholder:"Keyword..."}),Object(d.jsx)(m,{className:"header__right__search__button",onClick:function(){Be(Object(d.jsx)(p.b,{}),"test ".concat(g),"success"),I(g+1)},children:"Search"})]})}),Object(d.jsx)(f.a,{maxWidth:"1099px",children:Object(d.jsxs)("div",{className:"header__right__search__responsive",children:[Object(d.jsx)(m,{className:"header__right__search__responsive__button",onClick:function(){return l(!0)},children:"Search"}),Object(d.jsx)(Fe,{left:"-170px",top:"46px",isOpen:o,setIsOpen:l,children:Object(d.jsx)("div",{className:"header__right__search__responsive__dropdown__wrapper",children:Object(d.jsx)("input",{className:"header__right__search__responsive__dropdown__wrapper__input ",type:"text",placeholder:"Keyword..."})})})]})}),Object(d.jsxs)("button",{className:"header__right__profil",onClick:function(){return h(!0)},children:[Object(d.jsx)("img",{className:"header__right__profil__img",src:Ae("user",c.picture),alt:"p"}),Object(d.jsx)("span",{className:"header__right__profil__name",children:c.pseudo}),Object(d.jsx)("span",{className:"header__right__profil__icon",children:Object(d.jsx)(p.b,{})}),!we(c.notifications)&&Object(d.jsx)("span",{className:"bubble-notifications",style:{fontSize:c.notifications.length>99&&"0.6rem"},children:c.notifications.length>99?"99+":c.notifications.length})]}),Object(d.jsx)(Ke,{isOpen:O,setIsOpen:h})]})]})})},$e=function(e){var t=e.pageTitle,n=e.children,r=e.isHeaderBoard,c=void 0!==r&&r,a=e.boardName,s=e.hasHeader,i=void 0===s||s,o=Object(b.d)((function(e){return e.loaderReducer}));return document.title="Thullo | ".concat(o?"Loading . . .":t),Object(d.jsxs)(d.Fragment,{children:[i&&Object(d.jsx)(Qe,{isHeaderBoard:c,boardName:a}),n]})},et=function(e){var t=e.isOpen,n=e.setIsOpen,c=Object(b.c)(),a=Object(b.d)((function(e){return e.userReducer})),s=Object(r.useState)(""),i=Object(_.a)(s,2),o=i[0],l=i[1],j=Object(r.useState)({name:"",picture:"",isPrivate:!1,owner:a._id}),p=Object(_.a)(j,2),O=p[0],f=p[1];Object(r.useEffect)((function(){t||(l(""),f({name:"",picture:"",isPrivate:!1,owner:""}))}),[t]);var h=function(){var e=Object(N.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files[0]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.target.files[0];case 4:return n=e.sent,f(Object(u.a)(Object(u.a)({},O),{},{picture:n})),e.next=8,URL.createObjectURL(n);case 8:r=e.sent,l(r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=new FormData;e.append("name",O.name),e.append("picture",O.picture),e.append("isPrivate",O.isPrivate),e.append("owner",a._id),n(!1),c(function(e){return function(t){L.post("/board/create",e).then((function(e){var n=e.data;return console.log(n),ke("Board ".concat(n.name," create !")),t({type:V,payload:n})})).catch((function(e){console.log(e);var t=e.response.data;Re(t)}))}}(e))};return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(We,{hasCloseButton:!0,isOpen:t,setIsOpen:n,hasChoiceButton:!0,btnConfirmIcon:Object(d.jsx)(De.a,{}),btnConfirmMessage:"Create",confirmFunction:function(){return x()},children:Object(d.jsxs)("div",{className:"createboardmodal",children:[Object(d.jsxs)("label",{className:"createboardmodal__input__image ".concat(o?"":"no-preview"),htmlFor:"boardmodal_input_image",style:{backgroundImage:"url(".concat(o,")")},children:[Object(d.jsx)("div",{className:"".concat(o?"preview-background":""),children:Object(d.jsx)(Ue.a,{className:"createboardmodal__input__image__icon ".concat(o?"preview-active":"")})}),Object(d.jsx)("input",{type:"file",id:"boardmodal_input_image",onChange:h,accept:".png , .jpg , .jpeg",hidden:!0})]}),Object(d.jsx)("input",{value:O.name,onChange:function(e){return f(Object(u.a)(Object(u.a)({},O),{},{name:e.target.value}))},maxLength:"20",className:"createboardmodal__input__name",type:"text",placeholder:"Add board title"}),Object(d.jsxs)("div",{className:"createboardmodal__button__wrapper",children:[Object(d.jsxs)(m,{className:"createboardmodal__button__wrapper__item",children:[Object(d.jsx)(Ve.g,{className:"createboardmodal__button__wrapper__item__icon"})," ","Cover"]}),Object(d.jsxs)(m,{className:"createboardmodal__button__wrapper__item ".concat(O.isPrivate?"isStateActiveCreateBoard":""),onClick:function(){return f((function(e){return e.isPrivate=!e.isPrivate,Object(u.a)({},e)}))},children:[Object(d.jsx)(Ve.j,{className:"createboardmodal__button__wrapper__item__icon"})," ","Private"]})]})]})})})},tt=function(e){var t=e._id,n=e.name,r=e.picture,c=e.members;return Object(d.jsxs)(i.b,{to:"/board/".concat(t),className:"allboards__container__items",children:[Object(d.jsx)("img",{className:"allboards__container__items__img",src:Ae("board",r),alt:"board ".concat(n)}),Object(d.jsx)("span",{className:"allboards__container__items__title",children:n}),Object(d.jsx)("ul",{className:"allboards__container__items__members",children:c.map((function(e,t){var n=e._id,r=e.pseudo,a=e.picture;return 3===t?Object(d.jsxs)("span",{className:"allboards__container__items__members__others",children:["+",c.length-3," Others"]},Object(D.a)()):Object(d.jsx)("li",{className:"allboards__container__items__members__profil",children:Object(d.jsx)("img",{src:Ae("user",a),alt:"".concat(r," profil")})},n)})).slice(0,4)})]})},nt=function(){var e=Object(b.d)((function(e){return e.boardReducer.boards})),t=Object(r.useState)(!1),n=Object(_.a)(t,2),c=n[0],a=n[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(et,{isOpen:c,setIsOpen:a}),Object(d.jsx)($e,{pageTitle:"Allboards",children:Object(d.jsxs)("div",{className:"allboards",children:[Object(d.jsxs)("div",{className:"allboards__top",children:[Object(d.jsx)("h1",{className:"allboards__top__title",children:"All Boards"}),Object(d.jsxs)(m,{className:"allboards__top__btn",onClick:function(){return a(!0)},children:[Object(d.jsx)(De.a,{className:"allboards__top__btn__icon"}),Object(d.jsx)("span",{className:"allboards__top__btn__label",children:"Add"})]})]}),Object(d.jsx)("div",{className:"allboards__container",children:!we(e)&&e.map((function(e){return Object(d.jsx)(tt,Object(u.a)({},e),e._id)}))})]})})]})},rt=n.p+"static/media/Logo.e207370e.svg",ct={height:"80vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},at={height:"50px",position:"absolute",top:"15px",left:"15px"},st=function(e){var t=e.children,n=Object(b.d)((function(e){return e.userReducer}));return Object(d.jsxs)(d.Fragment,{children:[!we(n)&&Object(d.jsx)(o.a,{to:"/allboards"}),Object(d.jsxs)("div",{className:"auth",children:[Object(d.jsx)("img",{style:at,src:rt,alt:"Thullo"}),Object(d.jsx)("div",{style:ct,children:t})]})]})},it=function(e){var t=Object(b.c)(),n=Object(r.useState)({email:"",password:""}),c=Object(_.a)(n,2),a=c[0],s=c[1];return Object(d.jsx)($e,{pageTitle:"Login",hasHeader:!1,children:Object(d.jsx)(st,{children:Object(d.jsxs)("form",{className:"auth__component",onSubmit:function(e){e.preventDefault(),t(function(e){return function(t){L.post("/user/login",e).then((function(e){var n=e.data,r=n.user,c=n.token;return Ce(c),Ee(["danger","warning"]),Be(Object(d.jsx)(H.b,{}),"Welcome ".concat(r.pseudo," !"),"neutral"),t(oe(r._id)),t({type:le,payload:r})})).catch((function(e){var t=e.response.data;Re(t)}))}}(a))},noValidate:!0,children:[Object(d.jsx)("h1",{className:"auth__title",children:"Login"}),Object(d.jsx)("div",{className:"auth__input__wrapper",children:Object(d.jsx)("input",{className:"auth__input",type:"email",placeholder:"Email",value:a.email,autoComplete:"on",onChange:function(e){return s(Object(u.a)(Object(u.a)({},a),{},{email:e.target.value}))}})}),Object(d.jsx)("div",{className:"auth__input__wrapper",children:Object(d.jsx)("input",{className:"auth__input",type:"password",placeholder:"Password",value:a.password,onChange:function(e){return s(Object(u.a)(Object(u.a)({},a),{},{password:e.target.value}))}})}),Object(d.jsx)(m,{className:"auth__btn",children:"Connexion"}),Object(d.jsxs)("p",{className:"auth__has-account",children:["You don't have account ? ",Object(d.jsx)(i.b,{to:"/register",children:"Register"})]})]})})})},ot=n(151),dt=n(44),lt=function(e){var t=e.radius,n=e.color,r=void 0===n?"#2f80ed":n;return Object(d.jsxs)("svg",{className:"loader",height:2*t||100,width:2*t||100,children:[Object(d.jsx)("circle",{className:"loader__inset",cx:.8*t||50,cy:.8*t||50,r:.8*t/2||25,strokeWidth:.03*t,stroke:r}),Object(d.jsx)("circle",{className:"loader__around",cx:t||50,cy:t||50,r:t/2||25,strokeWidth:.03*t,stroke:r})]})},ut=function(e){var t=Object(r.useState)({}),n=Object(_.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),l=Object(_.a)(s,2),b=l[0],j=l[1],O=Object(r.useState)(!1),f=Object(_.a)(O,2),h=f[0],x=f[1],v=Object(ot.a)({initialValues:{pseudo:"",email:"",password:"",confirmPassword:""},validationSchema:dt.a({pseudo:dt.c().min(4,"Pseudo should have 4 characters minimum").max(12,"Pseudo should have 12 characters maximum").required("Required"),email:dt.c().required("Email address is required").email("Invalid email address"),password:dt.c().min(6,"Password should have 6 characters minimum").required("Password is required"),confirmPassword:dt.c().required("Please confirm your password").oneOf([dt.b("password"),null],"Password must matched")}),onSubmit:function(e){!function(e){h||(x(!0),L.post("/user/register",e).then((function(e){a({}),Ee(["danger","warning"]),Be(Object(d.jsx)(p.a,{}),"Sign Up Successful","success"),j(!0)})).catch((function(e){var t=e.response.data;Re(t),a(e.response.data)})).finally((function(){x(!1)})))}({pseudo:e.pseudo,email:e.email,password:e.password})}});return Object(d.jsxs)(d.Fragment,{children:[b&&Object(d.jsx)(o.a,{to:"/login"}),Object(d.jsx)($e,{pageTitle:"Register",hasHeader:!1,children:Object(d.jsx)(st,{children:Object(d.jsxs)("form",{className:"auth__component",onSubmit:v.handleSubmit,noValidate:!0,children:[Object(d.jsx)("h1",{className:"auth__title",children:"Register"}),Object(d.jsxs)("div",{className:"auth__input__wrapper",children:[Object(d.jsx)("input",Object(u.a)({className:"auth__input",type:"text"},v.getFieldProps("pseudo"))),Object(d.jsx)("span",{className:"placeholder ".concat(v.values.pseudo&&"placeholder_active"),children:"Pseudo"})]}),v.touched.pseudo&&v.errors.pseudo&&Object(d.jsx)("p",{className:"auth__error",children:v.errors.pseudo}),Object(d.jsxs)("div",{className:"auth__input__wrapper",children:[Object(d.jsx)("input",Object(u.a)({className:"auth__input",type:"email"},v.getFieldProps("email"))),Object(d.jsx)("span",{className:"placeholder ".concat(v.values.email&&"placeholder_active"),children:"Email"})]}),v.touched.email&&v.errors.email&&Object(d.jsx)("p",{className:"auth__error",children:v.errors.email}),c&&Object(d.jsx)("p",{className:"auth__error",children:c.message}),Object(d.jsxs)("div",{className:"auth__input__wrapper",children:[Object(d.jsx)("input",Object(u.a)({className:"auth__input",type:"password"},v.getFieldProps("password"))),Object(d.jsx)("span",{className:"placeholder ".concat(v.values.password&&"placeholder_active"),children:"Password"})]}),v.touched.password&&v.errors.password&&Object(d.jsx)("p",{className:"auth__error",children:v.errors.password}),Object(d.jsxs)("div",{className:"auth__input__wrapper",children:[Object(d.jsx)("input",Object(u.a)({className:"auth__input",type:"password"},v.getFieldProps("confirmPassword"))),Object(d.jsx)("span",{className:"placeholder ".concat(v.values.confirmPassword&&"placeholder_active"),children:"Confirm Password"})]}),v.touched.confirmPassword&&v.errors.confirmPassword&&Object(d.jsx)("p",{className:"auth__error",children:v.errors.confirmPassword}),Object(d.jsx)(m,{type:"submit",className:"auth__btn",style:{position:"relative"},children:h?Object(d.jsx)(lt,{color:"white",radius:"28"}):"Register"}),Object(d.jsxs)("p",{className:"auth__has-account",children:["You have already account ? ",Object(d.jsx)(i.b,{to:"/login",children:"Connexion"})]})]})})})]})},_t=n(38),bt=function(e){var t=e.isOpen,n=e.setIsOpen,c=Object(b.d)((function(e){return e.boardReducer.currentBoard})),a=Object(b.d)((function(e){return e.userReducer})),s=Object(r.useState)([]),i=Object(_.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)([]),j=Object(_.a)(u,2),p=j[0],O=j[1],f=Object(r.useState)([]),h=Object(_.a)(f,2),x=h[0],g=h[1],I=Object(r.useState)(""),N=Object(_.a)(I,2),y=N[0],D=N[1];Object(r.useEffect)((function(){we(c)||L.get("/user/all/".concat(c._id)).then((function(e){l(e.data),g(e.data)})).catch((function(e){console.log(e)}))}),[c]);return Object(d.jsxs)(Fe,{contentClass:"invitemember",isResponsive:!0,isOpen:t,setIsOpen:n,top:"46px",left:"-4px",title:"Invite to Board",description:"Search users you want to invite to",children:[Object(d.jsxs)("div",{className:"invitemember__input__wrapper",children:[Object(d.jsx)("input",{className:"invitemember__input__wrapper__input",placeholder:"User...",type:"text",value:y,onChange:function(e){return D(e.target.value)}}),Object(d.jsx)(m,{className:"invitemember__input__wrapper__btn",onClick:function(){g(o.filter((function(e){return e.pseudo.includes(y)})))},children:Object(d.jsx)(_t.b,{})})]}),!we(x)&&Object(d.jsx)("ul",{className:"invitemember__suggest",children:x.map((function(e,t){var n=e._id,r=e.pseudo,c=e.picture;return Object(d.jsx)("li",{style:{marginBottom:t===x.length-1?"":"15px"},children:Object(d.jsxs)("button",{className:"invitemember__suggest__item",onClick:function(){return e=n,void(-1===p.findIndex((function(t){return t===e}))?O([].concat(Object(v.a)(p),[e])):O(p.filter((function(t){return t!==e}))));var e},children:[Object(d.jsx)("img",{className:"invitemember__suggest__item__picture",src:Ae("user",c),alt:"user ".concat(r)}),Object(d.jsx)("span",{className:"invitemember__suggest__item__pseudo",children:r}),p.includes(n)?Object(d.jsx)(H.a,{className:"invitemember__suggest__item__icon invitemember__suggest__item__icon--select"}):Object(d.jsx)(Ge.a,{className:"invitemember__suggest__item__icon"})]})},n)}))}),Object(d.jsx)(m,{className:"invitemember__btn-invite ".concat(we(p)?"invitemember__btn-invite--disabled":""),onClick:function(){return!we(p)&&function(){var e={senderPseudo:a.pseudo,guestUserIDList:p,boardID:c._id,boardName:c.name};l(o.filter((function(e){return!p.includes(e._id)}))),g(x.filter((function(e){return!p.includes(e._id)}))),Xe.emit("send invitation",e)}()},children:"Invite"})]})},jt=function(e){return Object(d.jsxs)($e,{pageTitle:"Board Error",children:[Object(d.jsx)("h1",{children:"Board not found or is Private"}),Object(d.jsx)(i.b,{to:"/allboards",children:"Back to home"})]})},mt=function(e){var t=e.isOpen,n=e.setIsOpen,r=Object(b.d)((function(e){return e.boardReducer.currentBoard})),c=function(e){if(r.isPrivate!==e){var t=r._id;n(!1),Xe.emit("change state",{boardID:t,state:e})}};return Object(d.jsxs)(Fe,{contentClass:"privateorpublic",left:"-6px",top:"45px",isOpen:t,setIsOpen:n,title:"Visibility",description:"Choose who can see to this board.",children:[Object(d.jsxs)("button",{className:"privateorpublic__btn ".concat(r.isPrivate?"":"privateorpublic-active"),style:{marginBottom:"8px"},onClick:function(){return c(!1)},children:[Object(d.jsxs)("div",{className:"privateorpublic__btn__top",children:[Object(d.jsx)(Ve.l,{className:"privateorpublic__btn__top__icon"}),Object(d.jsx)("span",{children:"Public"})]}),Object(d.jsx)("p",{className:"privateorpublic__btn__desc",children:"Anyone on the internet can see this."})]}),Object(d.jsxs)("button",{className:"privateorpublic__btn ".concat(r.isPrivate?"privateorpublic-active":""),onClick:function(){return c(!0)},children:[Object(d.jsxs)("div",{className:"privateorpublic__btn__top",children:[Object(d.jsx)(Ue.c,{className:"privateorpublic__btn__top__icon"}),Object(d.jsx)("span",{children:"Private"})]}),Object(d.jsx)("p",{className:"privateorpublic__btn__desc",children:"Only board members can see this"})]})]})},pt=n(148),Ot=n(147),ft=function(e){var t=e.isOpen,n=e.setIsOpen,c=e.allowsRef,a=Object(r.useState)([]),s=Object(_.a)(a,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){L.get("https://emoji-api.com/categories/travel-places?access_key=c73293510309d49f6b5de5ad0badf72689ddf3ec").then((function(e){o(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(d.jsx)(Fe,{allowsRef:c,isOpen:t,setIsOpen:n,bottom:"-160px",right:"-8px",children:Object(d.jsxs)("div",{className:"emojipicker",children:[Object(d.jsx)("div",{className:"emojipicker__category",children:Object(d.jsx)("button",{className:"emojipicker__category__btn-close",onClick:function(){return n(!1)},children:Object(d.jsx)(Ot.a,{})})}),Object(d.jsx)("div",{className:"emojipicker__content",children:i.map((function(e,t){return Object(d.jsx)("button",{className:"emojipicker__content__item",children:e.character},t)}))})]})})},ht=function(e){var t=e.setIsOpen,n=e.content,c=e.submitFunc,a=(e.HTMLInjectedRef,Object(r.useState)(!1)),s=Object(_.a)(a,2),i=s[0],o=s[1],l=Object(r.useRef)(),u=Object(r.useRef)(),b=Object(r.useRef)(),j=function(e){return e.replaceAll(/\*[a-z0-1A-Z]+/g,'<span class="description-word-important">$&</span>')},p=function(){var e=Object(N.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c&&c(Le(b.current.innerHTML));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){b.current.innerHTML=n,u.current.innerHTML=b.current.innerHTML.replaceAll(/class="[a-zA-Z0-9:;.\s()\-,]*"/gi,"")}),[u,n]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"editdescription__wrapper",ref:l,children:[Object(d.jsx)("div",{onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),function(e,t){var n=e.current.ownerDocument.defaultView.getSelection(),r=n.getRangeAt(0),c=document.createTextNode(String.fromCodePoint(t));r.insertNode(c),r.setStartAfter(c),r.setEndAfter(c),n.removeAllRanges(),n.addRange(r)}(u,9),b.current.innerHTML=j(u.current.innerHTML))},spellCheck:!1,onInput:function(e){b.current.innerHTML=Le(j(e.target.innerHTML))},ref:u,className:"editdescription__wrapper__input",contentEditable:!0}),Object(d.jsx)("div",{ref:b,className:"editdescription__wrapper__output"}),Object(d.jsx)("button",{className:"editdescription__wrapper__btn-emoji",onClick:function(){return o(!0)},children:Object(d.jsx)(Ve.h,{})}),Object(d.jsx)(ft,{allowsRef:l,isOpen:i,setIsOpen:o})]}),Object(d.jsxs)("div",{className:"editdescription__btn-wrapper",children:[Object(d.jsx)(m,{className:"editdescription__btn-wrapper__btn-send",onClick:function(){return p()},children:"Save"}),Object(d.jsx)("button",{className:"editdescription__btn-wrapper__btn-cancel",onClick:function(){return t(!1)},children:"Cancel"})]})]})},xt=function(e){var t=e.icon,n=e.title,r=e.withMarginBottom,c=void 0===r||r;return Object(d.jsxs)("div",{className:"categorytitle",style:{marginBottom:c?"16px":"0"},children:[Object(d.jsx)("span",{className:"categorytitle__icon",children:t}),Object(d.jsx)("span",{className:"categorytitle__label",children:n})]})},vt=function(e){var t=e.isOpen,n=e.setIsOpen,c=Object(r.useRef)(),a=Object(r.useRef)(),s=Object(b.d)((function(e){return e.boardReducer.currentBoard})),i=Object(b.d)((function(e){return e.userReducer})),o=Object(r.useState)(!1),l=Object(_.a)(o,2),u=l[0],j=l[1],m=function(){return!we(i)&&!we(s)&&s.owner._id===i._id};return Object(r.useEffect)((function(){!we(s.description)&&c.current&&(c.current.innerHTML=s.description)}),[s.description,t,u]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(Fe,{isVertical:!1,contentRef:a,isOpen:t,setIsOpen:n,top:"0",right:"-8px",children:Object(d.jsxs)("div",{className:"boardmenu",ref:a,children:[Object(d.jsxs)("div",{className:"boardmenu__top",children:[Object(d.jsx)("h3",{className:"boardmenu__top__name",children:s.name}),Object(d.jsx)("button",{className:"boardmenu__top__btn-close",onClick:function(){return n(!1)},children:Object(d.jsx)(pt.a,{})})]}),Object(d.jsxs)("div",{className:"boardmenu__content",children:[Object(d.jsxs)("div",{className:"boardmenu__content__creator",children:[Object(d.jsx)(xt,{icon:Object(d.jsx)(He.b,{}),title:"Made by"}),Object(d.jsxs)("div",{className:"boardmenu__content__creator__profil",children:[Object(d.jsx)("img",{className:"boardmenu__content__creator__profil__img",src:!we(s)&&Ae("user",s.owner.picture),alt:"owner ".concat(!we(s)&&s.owner.pseudo)}),Object(d.jsxs)("div",{className:"boardmenu__content__creator__profil__infos",children:[Object(d.jsx)("span",{className:"boardmenu__content__creator__profil__infos__name",children:!we(s)&&s.owner.pseudo}),Object(d.jsx)("span",{className:"boardmenu__content__creator__profil__infos__date",children:function(){if(!we(s)){var e=Pe(s.createdAt),t=e.dayNum,n=e.monthLetter,r=e.years;return"on ".concat(t," ").concat(n,", ").concat(r," ")}}()})]})]})]}),Object(d.jsxs)("div",{className:"boardmenu__content__description",children:[Object(d.jsxs)("div",{className:"boardmenu__content__description__top",children:[Object(d.jsx)(xt,{icon:Object(d.jsx)(Ve.d,{}),title:"Description",withMarginBottom:!1}),!u&&m()&&Object(d.jsxs)("button",{className:"boardmenu__content__description__top__btn-edit",onClick:function(){return j(!u)},children:[Object(d.jsx)(Ve.e,{className:"boardmenu__content__description__top__btn-edit__icon"}),Object(d.jsx)("span",{children:"Edit"})]})]}),u?Object(d.jsx)(ht,{content:s.description,submitFunc:function(e){Xe.emit("change description",{description:e,boardID:s._id}),j(!1)},setIsOpen:j}):Object(d.jsx)("p",{ref:c,className:"boardmenu__content__description__para"})]}),Object(d.jsxs)("div",{className:"boardmenu__content__team",children:[Object(d.jsx)(xt,{icon:Object(d.jsx)(Ve.d,{}),title:"Team"}),Object(d.jsx)("ul",{className:"boardmenu__content__team__list",children:!we(s)&&s.members.map((function(e,t){return Object(d.jsxs)("li",{className:"boardmenu__content__team__list__item",style:{marginBottom:t===s.members.length-1?"":"15px"},children:[Object(d.jsx)("img",{className:"boardmenu__content__team__list__item__img",src:Ae("user",e.picture),alt:""}),Object(d.jsx)("span",{className:"boardmenu__content__team__list__item__pseudo",children:e.pseudo}),s.owner._id===e._id?Object(d.jsx)("span",{className:"boardmenu__content__team__list__item__admin",children:"Admin"}):m()&&Object(d.jsx)("button",{className:"boardmenu__content__team__list__item__btn-remove",onClick:function(){return function(e){var t={boardID:s._id,memberBannedID:e};Xe.emit("ban member",t)}(e._id)},children:"Remove"})]},e._id)}))})]}),Object(d.jsx)("button",{className:"boardmenu__content__btn-leave",onClick:function(){return function(){var e={userID:i._id,boardID:s._id};Xe.emit("leave board",e)}()},children:"Leave"}),m()&&Object(d.jsx)("button",{className:"boardmenu__content__btn-delete",onClick:function(){return function(){var e=s._id;Xe.emit("delete board",e)}()},children:"Delete Board"})]})]})})})},gt=function(e){var t=e.isOpen,n=e.setIsOpen,c=e.listID,a=e.onClick,s=e.isAddList,i=e.isFirstList,o=e.isFirstCard,l=e.style,j=e.scrollBottomReset,m=e.scrollLeftReset,p=Object(r.useRef)(),O=Object(r.useRef)(),f=Object(r.useState)(!1),h=Object(_.a)(f,2),x=h[0],v=h[1],g=Object(r.useState)(""),I=Object(_.a)(g,2),N=I[0],y=I[1],D=Object(b.d)((function(e){return e.userReducer})),w=Object(b.d)((function(e){return e.boardReducer.currentBoard})),C=s?x:t,R=s?v:n,B=w._id,E=function(){s||a&&a(),R(!0)};return Object(r.useEffect)((function(){var e=c;Xe.on("add list",(function(e){e.listCreated,e.boardID;e.userID===D._id&&setTimeout((function(){O.current&&O.current.focus(),m&&m()}),0)})),Xe.on("add card",(function(t){var n=t.listID,r=t.userID;e===n&&r===D._id&&setTimeout((function(){O.current&&O.current.focus(),j&&j()}),0)}))}),[w,c,j,m,D._id]),Object(r.useEffect)((function(){C&&(O.current&&O.current.focus(),m&&m(),Te(p,R))}),[C,R,m]),Object(d.jsx)(d.Fragment,{children:C?Object(d.jsxs)("form",{ref:p,className:"addlist addlist__form",style:l,onSubmit:function(e){return function(e){if(e.preventDefault(),!N)return O.current.focus();var t=D._id;s?Xe.emit("add list",{name:N,boardID:B,userID:t}):Xe.emit("add card",{name:N,boardID:B,listID:c,userID:t}),y("")}(e)},children:[Object(d.jsx)("div",{className:"addlist__head",children:Object(d.jsx)("input",{ref:O,className:"addlist__input",value:N,onChange:function(e){return y(e.target.value)},type:"text"})}),Object(d.jsxs)("button",{type:"submit",className:"addlist__btn-add",children:["Add ",s?"list":"card"]})]}):Object(d.jsx)("button",{style:Object(u.a)(Object(u.a)({},l),{},{margin:s?"":"auto",background:"transparent",display:"flex"}),onClick:function(e){return E()},children:Object(d.jsxs)("div",{className:"addlist",children:[Object(d.jsx)("span",{children:"Add ".concat(i||o?"":"another"," ").concat(s?"list":"card")}),Object(d.jsx)(Ve.a,{className:"addlist__head__icon"})]})})})},It=function(e){var t=e.isOpen,n=e.setIsOpen,c=e.cardMembers,a=e.cardID,s=e.listID,i=Object(b.d)((function(e){return e.boardReducer.currentBoard})),o=Object(r.useState)([]),l=Object(_.a)(o,2),u=l[0],j=l[1],p=Object(r.useState)([]),O=Object(_.a)(p,2),f=O[0],h=O[1],x=Object(r.useState)([]),g=Object(_.a)(x,2),I=g[0],N=g[1],y=Object(r.useState)(""),D=Object(_.a)(y,2),w=D[0],C=D[1];Object(r.useEffect)((function(){we(c)||j(c.map((function(e){return e._id})))}),[c]),Object(r.useEffect)((function(){we(i)||L.post("/board/members/".concat(i._id),{cardID:a,listID:s}).then((function(e){h(e.data),N(e.data)})).catch((function(e){console.log(e)}))}),[t,a,s,i]);return Object(d.jsxs)(Fe,{contentClass:"invitemember",isResponsive:!0,isOpen:t,setIsOpen:n,title:"Members",description:"Assign members to this card",children:[Object(d.jsxs)("div",{className:"invitemember__input__wrapper",children:[Object(d.jsx)("input",{className:"invitemember__input__wrapper__input",placeholder:"User...",type:"text",value:w,onChange:function(e){return C(e.target.value)}}),Object(d.jsx)(m,{className:"invitemember__input__wrapper__btn",onClick:function(){N(f.filter((function(e){return e.pseudo.includes(w)})))},children:Object(d.jsx)(_t.b,{})})]}),!we(I)&&Object(d.jsx)("ul",{className:"invitemember__suggest",children:I.map((function(e,t){var n=e._id,r=e.pseudo,c=e.picture;return Object(d.jsx)("li",{style:{marginBottom:t===I.length-1?"":"15px"},children:Object(d.jsxs)("button",{className:"invitemember__suggest__item",onClick:function(){return e=n,void(-1===u.findIndex((function(t){return t===e}))?j((function(t){t.push(e);var n={assignedMembersID:t,boardID:i._id,listID:s,cardID:a};return Xe.emit("assign member card",n),Object(v.a)(t)})):j((function(t){var n={assignedMembersID:t=t.filter((function(t){return t!==e})),boardID:i._id,listID:s,cardID:a};return Xe.emit("assign member card",n),Object(v.a)(t)})));var e},children:[Object(d.jsx)("img",{className:"invitemember__suggest__item__picture",src:Ae("user",c),alt:"user ".concat(r)}),Object(d.jsx)("span",{className:"invitemember__suggest__item__pseudo",children:r}),u.includes(n)?Object(d.jsx)(H.a,{className:"invitemember__suggest__item__icon invitemember__suggest__item__icon--select"}):Object(d.jsx)(Ge.a,{className:"invitemember__suggest__item__icon"})]})},n)}))})]})},Nt=function(e){var t=e.pseudo,n=e.picture;return Object(d.jsxs)("li",{className:"userdisplay",children:[Object(d.jsx)("img",{className:"userdisplay__img",src:Ae("user",n),alt:""}),Object(d.jsx)("span",{className:"userdisplay__name",children:t})]})},yt=function(e){var t=e.card,n=e.listID,c=e.board,a=Object(r.useState)(!1),s=Object(_.a)(a,2),i=s[0],o=s[1];return Object(d.jsxs)("div",{className:"cardmodal__content__left__description",children:[Object(d.jsxs)("div",{className:"cardmodal__content__left__description__head",children:[Object(d.jsx)(xt,{icon:Object(d.jsx)(Ve.d,{}),title:"Description",withMarginBottom:!1}),Object(d.jsxs)(m,{className:"cardmodal__content__left__description__head__btn-edit",onClick:function(){return o(!0)},children:[Object(d.jsx)(Ve.e,{className:"cardmodal__content__left__description__head__btn-edit__icon"}),Object(d.jsx)("span",{className:"cardmodal__content__left__description__head__btn-edit__label",children:"Edit"})]})]}),i?Object(d.jsx)(ht,{content:t.description,submitFunc:function(e){Xe.emit("change card description",{boardID:c._id,listID:n,cardID:t._id,description:e}),o(!1)},setIsOpen:o}):Object(d.jsx)("p",{dangerouslySetInnerHTML:{__html:t.description},className:"cardmodal__content__left__description__content"})]})},Dt=n(149),wt=n.n(Dt),Ct=function(e){var t=e.boardID,n=e.listID,c=e.cardID,a=e.attachments,s=Object(r.useState)([]),i=Object(_.a)(s,2),o=i[0],l=i[1];Object(r.useEffect)((function(){we(a)||l(a)}),[a]),Object(r.useEffect)((function(){Xe.on("delete attachment",(function(e){var t=e.attachmentID;l((function(e){return e.filter((function(e){return e._id!==t}))}))}))}),[]);var u=function(e){var t=e.match(/\.[0-9a-z]+$/i)[0].toLowerCase();return".png"===t||".jpg"===t||".jpeg"===t},b=function(e){if(!we(e)){var t=Pe(e),n=t.dayNum,r=t.monthLetter,c=t.years;return"Added ".concat(r," ").concat(n,", ").concat(c)}};return Object(d.jsxs)("div",{className:"cardmodal__content__left__attachements",children:[Object(d.jsxs)("div",{className:"cardmodal__content__left__attachements__head",children:[Object(d.jsx)(xt,{icon:Object(d.jsx)(Ve.d,{}),title:"Attachements",withMarginBottom:!1}),Object(d.jsxs)("label",{className:"cardmodal__content__left__attachements__head__btn-add",htmlFor:"upload-attachement",children:[Object(d.jsx)(Ve.a,{className:"cardmodal__content__left__attachements__head__btn-add__icon"}),Object(d.jsx)("span",{className:"cardmodal__content__left__attachements__head__btn-add__label",children:"Add"}),Object(d.jsx)("input",{type:"file",onChange:function(e){return function(e){var r=new FormData;r.append("attachment",e.target.files[0]),r.append("boardID",t),r.append("listID",n),r.append("cardID",c),L.post("/board/list/card/attachment",r).then((function(e){l([].concat(Object(v.a)(o),[e.data]))})).catch((function(e){console.log(e)}))}(e)},name:"",id:"upload-attachement"})]})]}),Object(d.jsx)("ul",{className:"cardmodal__content__left__attachements__list",children:o.map((function(e,r){var a=e._id,s=e.name,i=e.filePath,o=e.createdAt;return Object(d.jsxs)("li",{className:"cardmodal__content__left__attachements__list__item",children:[Object(d.jsx)("div",{className:"cardmodal__content__left__attachements__list__item__left",children:u(s)?Object(d.jsx)("img",{className:"cardmodal__content__left__attachements__list__item__left__img",src:Ae("attachment",i),alt:"attachment"}):Object(d.jsx)("span",{children:s.substring(0,2)})}),Object(d.jsxs)("div",{className:"cardmodal__content__left__attachements__list__item__right",children:[Object(d.jsx)("span",{className:"cardmodal__content__left__attachements__list__item__right__date",children:b(o)}),Object(d.jsx)("h4",{className:"cardmodal__content__left__attachements__list__item__right__name",children:s}),Object(d.jsxs)("div",{className:"cardmodal__content__left__attachements__list__item__right__btn-wrapper",children:[Object(d.jsx)(m,{className:"cardmodal__content__left__attachements__list__item__right__btn-wrapper__item",onClick:function(){return function(e,t){L.post("/board/list/card/download-attachment",{filePath:t},{responseType:"blob"}).then((function(t){console.log(t),wt()(t.data,e)})).catch((function(e){console.log(e)}))}(s,i)},children:"Download"}),Object(d.jsx)(m,{className:"cardmodal__content__left__attachements__list__item__right__btn-wrapper__item",onClick:function(){return e=a,void Xe.emit("delete attachment",{boardID:t,listID:n,cardID:c,attachmentID:e});var e},children:"Delete"})]})]})]},r)}))})]})},Rt=function(e){var t=e.content,n=e.setContent,c=e.submitFunc,a=e.isNewComment,s=void 0===a||a,i=e.userPicture,o=Object(r.useRef)(),l=Object(r.useRef)(),u=Object(r.useState)(!1),b=Object(_.a)(u,2),j=b[0],p=b[1],O=Object(r.useState)(!1),f=Object(_.a)(O,2),h=f[0],x=f[1];Object(r.useEffect)((function(){!t&&h&&p(!1),l.current.textContent=t,Te(o,x)}),[t]);return Object(d.jsxs)("div",{className:"commentbox",ref:o,children:[Object(d.jsxs)("div",{className:"commentbox__head",children:[Object(d.jsx)("img",{src:Ae("user",i),alt:""}),Object(d.jsxs)("div",{className:"commentbox-input-wrapper",children:[Object(d.jsx)("div",{ref:l,onFocus:function(){return p(!0),void x(!0)},onBlur:function(){!t&&p(!1)},onInput:function(){return n(l.current.textContent),void(t||p(!0))},className:"commentbox-input-wrapper__input",contentEditable:!0}),!j&&Object(d.jsx)("span",{className:"commentbox-input-wrapper__placeholder",children:"Write a comment..."})]})]}),Object(d.jsx)("div",{className:"commentbox__toolbar ".concat(h?"commentbox__toolbar--open":""),children:Object(d.jsx)(m,{onClick:function(){return function(){if(!t)return l.current.focus();c(),n(""),l.current.innerHTML=""}()},children:s?"Comment":"Save"})})]})},Bt=function(e){var t=e.boardID,n=e.listID,c=e.cardID,a=e.comments,s=(Object(r.useRef)(),Object(r.useRef)()),i=Object(r.useState)([]),o=Object(_.a)(i,2),l=o[0],u=o[1],j=Object(r.useState)({commentID:null,isEdit:!1}),p=Object(_.a)(j,2),O=p[0],f=p[1],h=Object(r.useState)(""),x=Object(_.a)(h,2),g=x[0],y=x[1],D=Object(b.d)((function(e){return e.userReducer})),w=D._id,C=D.picture,R=Object(r.useState)(""),B=Object(_.a)(R,2),E=B[0],S=B[1];Object(r.useEffect)((function(){Xe.on("card edit comment",(function(e){e.boardID,e.listID,e.cardID;var t=e.commentID,n=e.message;u((function(e){return e.map((function(e){return e._id===t&&(e.message=n),e}))}))}))}),[]),Object(r.useEffect)((function(){we(a)||u(a)}),[a]);var k=function(e){var t=Pe(e),n=t.dayNum,r=t.monthLetter,c=t.hour;return"".concat(n," ").concat(r," at ").concat(c)};Object(r.useEffect)((function(){var e=c;return Xe.on("card comment",(function(t){t.boardID,t.listID;var n=t.cardID,r=t.comments;n===e&&u((function(e){return[].concat(Object(v.a)(e),[r])}))})),Xe.on("card delete comment",(function(t){t.boardID,t.listID;var n=t.cardID,r=t.commentID;n===e&&u((function(e){return e.filter((function(e){return e._id!==r}))}))})),function(){Xe.off("card comment"),Xe.off("card delete comment")}}),[]);var A=function(){var e=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({commentID:t,isEdit:!0});case 2:y(n),s.current.innerText=n;case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"cardmodal__content__left__comment",children:[Object(d.jsx)(Rt,{content:E,setContent:S,submitFunc:function(){E&&Xe.emit("card comment",{boardID:t,listID:n,cardID:c,userID:w,message:E})},userPicture:C}),Object(d.jsx)("ul",{className:"cardmodal__content__left__comment__list",children:l.map((function(e,r){var a=e.user,i=e.message,o=e.createdAt,u=e._id;return Object(d.jsxs)("li",{className:"cardmodal__content__left__comment__list__item",style:{marginBottom:r===l.length-1?"":"16px"},children:[Object(d.jsxs)("div",{className:"cardmodal__content__left__comment__list__item__head",children:[Object(d.jsx)("img",{src:Ae("user",a.picture),alt:"",className:"cardmodal__content__left__comment__list__item__head__profil-img"}),Object(d.jsxs)("div",{className:"cardmodal__content__left__comment__list__item__head__infos",children:[Object(d.jsx)("h4",{className:"cardmodal__content__left__comment__list__item__head__infos__name",children:a.pseudo}),Object(d.jsx)("span",{className:"cardmodal__content__left__comment__list__item__head__infos__date",children:k(o)})]}),a._id===w&&Object(d.jsxs)("div",{className:"cardmodal__content__left__comment__list__item__head__btn-wrapper",children:[Object(d.jsx)("button",{className:"cardmodal__content__left__comment__list__item__head__btn-wrapper__edit",onClick:function(){return A(u,i)},children:"Edit"}),"-",Object(d.jsx)("button",{className:"cardmodal__content__left__comment__list__item__head__btn-wrapper__delete",onClick:function(){return e=u,void Xe.emit("card delete comment",{boardID:t,listID:n,cardID:c,commentID:e});var e},children:"Delete"})]})]}),O.isEdit&&O.commentID===u?Object(d.jsxs)("div",{className:"cardmodal__content__left__comment__list__item__edit-comment-wrapper",children:[Object(d.jsx)("div",{ref:s,contentEditable:!0,onInput:function(){y(s.current.textContent)},className:"cardmodal__content__left__comment__list__item__edit-comment-wrapper__input"}),Object(d.jsxs)("div",{className:"",style:{display:"flex"},children:[Object(d.jsx)(m,{className:"cardmodal__content__left__comment__list__item__edit-comment-wrapper__btn-save",onClick:function(){return e=u,Xe.emit("card edit comment",{boardID:t,listID:n,cardID:c,commentID:e,message:g}),void f({commentID:null,isEdit:!1});var e},children:"Save"}),Object(d.jsx)(m,{className:"cardmodal__content__left__comment__list__item__edit-comment-wrapper__btn-cancel",onClick:function(){return f({commentID:null,isEdit:!1})},children:"Cancel"})]})]}):Object(d.jsx)("p",{className:"cardmodal__content__left__comment__list__item__comment",children:i})]},r)}))})]})})},Et={fontSize:"0.8rem",borderRadius:"9999px",padding:"4px 10px",marginRight:"12px",display:"flex",alignItems:"center"},St=function(e){var t=e.name,n=e.color,r=e.style,c=e.isDeleted,a=void 0!==c&&c,s=e.onClick,i=function(){s&&s()};return Object(d.jsxs)("span",{className:"cardlabel ".concat(a?"cardlabeldeletable":""),onClick:function(){return i()},style:Object(u.a)(Object(u.a)(Object(u.a)({},Et),r),{},{backgroundColor:"rgba(".concat(n,",0.3)"),color:"rgb(".concat(n,")")}),children:[t,a&&Object(d.jsx)(Ue.b,{style:{marginLeft:"6px"}})]})},kt=function(e){var t=e.labels,n=e.boardID,c=e.listID,a=e.cardID,s=e.isOpen,i=e.setIsOpen,o=Object(r.useState)([]),l=Object(_.a)(o,2),u=l[0],b=l[1],j=Object(r.useState)(""),p=Object(_.a)(j,2),O=p[0],f=p[1],h=Object(r.useState)(),x=Object(_.a)(h,2),g=x[0],I=x[1];Object(r.useEffect)((function(){we(t)||b(t)}),[t,s]);var N={darkGreen:"33, 150, 83",yellow:"242, 201, 76",orange:"242, 153, 74",red:"235, 87, 87",blue:"47, 128, 237",cyan:"86, 204, 242",lightGreen:"111, 207, 151",veryDarkGray:"51, 51, 51",darkGray:"79, 79, 79",midGray:"130, 130, 130",lightGray:"189, 189, 189",gray:"224, 224, 224"};Object(r.useEffect)((function(){var e=a;Xe.on("card add label",(function(t){t.boardID,t.listID;var n=t.cardID,r=t.label;e===n&&b((function(e){return[].concat(Object(v.a)(e),[r])}))})),Xe.on("card delete label",(function(t){t.boardID,t.listID;var n=t.cardID,r=t.labelID;e===n&&b((function(e){return e.filter((function(e){return e._id!==r}))}))}))}),[a]);return Object(d.jsxs)(Fe,{isOpen:s,setIsOpen:i,top:"46px",contentClass:"label",title:"Label",description:"Select a name and a color",children:[Object(d.jsx)("input",{value:O,onChange:function(e){return f(e.target.value)},placeholder:"Label...",className:"label__input",type:"text"}),Object(d.jsx)("div",{className:"label__colorpicker",children:function(){var e=[],t=function(t){e.push(Object(d.jsx)("button",{onClick:function(){I(N[t]===g?"":N[t])},style:{backgroundColor:"rgba(".concat(N[t],", 1)")},className:"label__colorpicker__item ".concat(g===N[t]?"color-selected":"")},t))};for(var n in N)t(n);return e}()}),Object(d.jsxs)("div",{className:"label__available",children:[Object(d.jsx)(xt,{icon:Object(d.jsx)(Ve.i,{}),title:"Available "}),Object(d.jsx)("div",{className:"label__available__container",children:!we(u)&&u.map((function(e){return Object(d.jsx)(St,{onClick:function(){return t=e._id,void Xe.emit("card delete label",{boardID:n,listID:c,cardID:a,labelID:t});var t},style:{marginBottom:"8px"},name:e.name,color:e.color,isDeleted:!0},e._id)}))})]}),Object(d.jsx)(m,{className:"label__btn-add",onClick:function(){return O?g?(Ee("warning"),ke("Label created"),void Xe.emit("card add label",{boardID:n,listID:c,cardID:a,labelName:O,color:g})):Se("Missing label color"):Se("Missing label name")},children:"Add"})]})},At=function(e){var t=e.isOpen,n=e.setIsOpen,c=e.boardID,a=e.listID,s=e.cardID,i=Object(r.useState)(""),o=Object(_.a)(i,2),l=(o[0],o[1],Object(r.useState)([])),u=Object(_.a)(l,2),b=u[0],j=u[1];Object(r.useEffect)((function(){var e=Math.floor(1+30*Math.random());return k.a.get("https://api.unsplash.com/photos",{params:{per_page:"12",page:e},headers:{Authorization:"Client-ID FStR-mHl49Em5PReprA_w0cQgQBzXRyI0rjzd3GXzTY"}}).then((function(e){j(e.data)})).catch((function(e){console.log(e)})),function(){j([])}}),[]);return Object(d.jsxs)(Fe,{isOpen:t,setIsOpen:n,title:"Photo Search",description:"Search Unsplash for photos",contentClass:"picturepicker",children:[Object(d.jsx)("input",{className:"picturepicker__input",placeholder:"Keywords...",type:"text"}),Object(d.jsx)("div",{className:"picturepicker__content",children:b.map((function(e){return Object(d.jsx)("button",{className:"picturepicker__content__picture",onClick:function(){return function(e){Xe.emit("card change picture",{boardID:c,listID:a,cardID:s,picture:e.urls.regular})}(e)},children:Object(d.jsx)("img",{src:e.urls.thumb,alt:""})},e.id)}))})]})},Lt=function(e){var t=e.isOpen,n=e.setIsOpen,c=e._id,a=e.listID,s=e.listName,i=Object(b.d)((function(e){return e.boardReducer.currentBoard})),o=Object(r.useState)([]),l=Object(_.a)(o,2),j=l[0],p=l[1],O=Object(r.useState)(!1),f=Object(_.a)(O,2),h=f[0],x=f[1],g=Object(r.useState)(!0),I=Object(_.a)(g,2),N=I[0],y=I[1],D=Object(r.useState)(!1),w=Object(_.a)(D,2),C=w[0],R=w[1],B=Object(r.useState)(!1),E=Object(_.a)(B,2),S=E[0],k=E[1];Object(r.useEffect)((function(){L.post("/board/card/".concat(c),{boardID:i._id,listID:a}).then((function(e){p(e.data),y(!1)})).catch((function(e){console.log(e)}))}),[i._id,a,c]),Object(r.useEffect)((function(){var e=c;return Xe.on("assign member card",(function(t){var n=t.assignedMembers,r=t.cardID;e===r&&p((function(e){return Object(u.a)(Object(u.a)({},e),{},{members:Object(v.a)(n)})}))})),Xe.on("change card description",(function(t){t.boardID,t.listID;var n=t.cardID,r=t.description;e===n&&p((function(e){return Object(u.a)(Object(u.a)({},e),{},{description:r})}))})),Xe.on("change card title",(function(t){t.boardID,t.listID;var n=t.cardID,r=t.cardTitle;e===n&&p((function(e){return Object(u.a)(Object(u.a)({},e),{},{title:r})}))})),Xe.on("card change picture",(function(t){t.boardID,t.listID;var n=t.cardID,r=t.picture;e===n&&p((function(e){return Object(u.a)(Object(u.a)({},e),{},{picture:r})}))})),function(){Xe.off("change card description")}}),[c]);return Object(d.jsx)(We,{hasCloseButton:!0,isOpen:t,setIsOpen:n,hasOverflowYScroll:!0,children:Object(d.jsx)("div",{className:"cardmodal",children:N?Object(d.jsx)(lt,{radius:150}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"cardmodal__head",children:Object(d.jsx)("img",{src:j.picture,alt:"card"})}),Object(d.jsxs)("div",{className:"cardmodal__content",children:[Object(d.jsxs)("div",{className:"cardmodal__content__left",children:[Object(d.jsxs)("div",{className:"cardmodal__content__left__head",children:[Object(d.jsx)("textarea",{value:j.title,onChange:function(e){return p(Object(u.a)(Object(u.a)({},j),{},{title:e.target.value}))},onBlur:function(){return function(){var e={boardID:i._id,listID:a,cardID:c,cardTitle:j.title};Xe.emit("change card title",e)}()},className:"cardmodal__content__left__head__title"}),Object(d.jsxs)("span",{className:"cardmodal__content__left__head__inlist",children:["in list"," ",Object(d.jsx)("span",{className:"cardmodal__content__left__head__inlist__name",children:s})]})]}),Object(d.jsx)(yt,{listID:a,board:i,card:j}),Object(d.jsx)(Ct,{attachments:j.attachments,boardID:i._id,listID:a,cardID:c}),Object(d.jsx)(Bt,{comments:j.comments,boardID:i._id,listID:a,cardID:c})]}),Object(d.jsxs)("div",{className:"cardmodal__content__right",children:[Object(d.jsx)(xt,{icon:Object(d.jsx)(He.b,{}),title:"Actions"}),Object(d.jsxs)("div",{style:{position:"relative"},children:[Object(d.jsxs)(m,{className:"cardmodal__content__right__btn",onClick:function(){return x(!0)},children:[Object(d.jsx)(Ve.i,{className:"cardmodal__content__right__btn__icon"}),Object(d.jsx)("span",{className:"cardmodal__content__right__btn__label",children:"Labels"})]}),Object(d.jsx)(kt,{labels:j.labels,boardID:i._id,listID:a,cardID:c,isOpen:h,setIsOpen:x})]}),Object(d.jsxs)("div",{style:{position:"relative"},children:[Object(d.jsxs)(m,{className:"cardmodal__content__right__btn",onClick:function(){return k(!0)},children:[Object(d.jsx)(Ve.g,{className:"cardmodal__content__right__btn__icon"}),Object(d.jsx)("span",{className:"cardmodal__content__right__btn__label",children:"Cover"})]}),Object(d.jsx)(At,{boardID:i._id,listID:a,cardID:c,isOpen:S,setIsOpen:k})]}),Object(d.jsxs)("div",{className:"cardmodal__content__right__members",children:[Object(d.jsx)(xt,{icon:Object(d.jsx)(Ve.f,{}),title:"Members"}),Object(d.jsx)("ul",{className:"cardmodal__content__right__members__list",children:!we(j)&&j.members.map((function(e){return Object(d.jsx)(Nt,{pseudo:e.pseudo,picture:e.picture},e._id)}))}),Object(d.jsxs)(m,{className:"cardmodal__content__right__members__btn-add",onClick:function(){return R(!0)},children:[Object(d.jsx)("span",{children:"Assign a member"})," ",Object(d.jsx)(Ve.a,{className:"cardmodal__content__right__members__btn-add__icon"})]}),Object(d.jsx)(It,{cardMembers:j.members,cardID:c,listID:a,isOpen:C,setIsOpen:R})]})]})]})]})})})},Tt="CARD_MODAL",Mt=function(){var e=Object(b.d)((function(e){return e.modalReducer})),t=e.modalName,n=e.props,c=Object(r.useState)(!1),a=Object(_.a)(c,2),s=a[0],i=a[1];Object(r.useEffect)((function(){i(!!t)}),[t]);return function(){switch(t){case"CREATE_BOARD_MODAL":return Object(d.jsx)(et,Object(u.a)(Object(u.a)({},n),{},{isOpen:s,setIsOpen:i}));case"NOTIFICATIONS_MODAL":return Object(d.jsx)(Ye,Object(u.a)(Object(u.a)({},n),{},{isOpen:s,setIsOpen:i}));case Tt:return Object(d.jsx)(Lt,Object(u.a)(Object(u.a)({},n),{},{isOpen:s,setIsOpen:i}));default:return Object(d.jsx)(d.Fragment,{children:" "})}}()},Pt=function(e){var t=e._id,n=e.title,r=e.picture,c=e.labels,a=e.members,s=(e.attachments,e.listID),i=e.listName,o=Object(b.c)();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("li",{className:"card",onClick:function(e){var n,r;o((n=Tt,r={_id:t,listID:s,listName:i},function(e){return e({type:xe,payload:{modalName:n,props:r}})}))},children:[r&&Object(d.jsx)("img",{className:"card__image",src:r}),Object(d.jsx)("span",{className:"card__title",children:n}),Object(d.jsx)("div",{className:"card__category",children:c.map((function(e){return Object(d.jsx)(St,{style:{marginBottom:"8px"},name:e.name,color:e.color},e._id)}))}),Object(d.jsxs)("div",{className:"card__bottom",children:[Object(d.jsxs)("ul",{className:"card__bottom__members",children:[a.map((function(e,t){return Object(d.jsx)("li",{className:"card__bottom__members__item",children:Object(d.jsx)("img",{className:"card__bottom__members__item__img",src:Ae("user",e.picture),alt:""})},t)})),Object(d.jsx)("li",{children:Object(d.jsx)(m,{className:"card__bottom__members__btn-addmember",onClick:function(e){return e.stopPropagation()},children:Object(d.jsx)(Ve.a,{className:"card__bottom__members__btn-addmember__icon"})})})]}),Object(d.jsxs)("div",{className:"card__bottom__utils",children:[Object(d.jsxs)("button",{className:"card__bottom__utils__btn",children:[Object(d.jsx)(Ve.c,{}),Object(d.jsx)("span",{className:"card__bottom__utils__btn__number",children:"1"})]}),Object(d.jsxs)("button",{className:"card__bottom__utils__btn",children:[Object(d.jsx)(p.d,{}),Object(d.jsx)("span",{className:"card__bottom__utils__btn__number",children:"1"})]})]})]})]})})},Ft=n(43),Ht=function(e){var t=e.destinationIndex,n=e.draggableID,c=e.currentListOverID,a=e.type,s=Object(r.useState)({}),i=Object(_.a)(s,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){if(n){var e="[".concat("data-rbd-drag-handle-draggable-id","='").concat(n,"']"),r="[".concat("data-rbd-droppable-id","='").concat(c,"']"),s=document.querySelector(e),i=document.querySelector(r);if(!s)return;var o=s.clientHeight,d=s.clientWidth;if("CARD"===a){var u=parseFloat(window.getComputedStyle(i||s.parentNode).paddingTop)+Object(v.a)(i?i.children:s.parentNode.children).slice(0,t).reduce((function(e,t){var n=t.currentStyle||window.getComputedStyle(t),r=parseFloat(n.marginBottom);return e+t.clientHeight+r}),0);l({clientHeight:o,clientWidth:d,clientY:u,clientX:parseFloat(window.getComputedStyle(s.parentNode).paddingLeft)})}else if("LIST"===a){var _=parseFloat(window.getComputedStyle(s.parentNode).paddingLeft)+Object(v.a)(s.parentNode.children).slice(0,t).reduce((function(e,t){var n=t.currentStyle||window.getComputedStyle(t),r=parseFloat(n.marginRight);return e+t.clientWidth+r}),0);l({clientHeight:o,clientWidth:d,clientY:parseFloat(window.getComputedStyle(s.parentNode).paddingTop),clientX:_})}}}),[n,t,a,c]),Object(d.jsx)(d.Fragment,{children:!we(o)&&Object(d.jsx)("div",{className:"dndplaceholder",style:{position:"absolute",top:o.clientY,left:o.clientX,height:o.clientHeight,width:o.clientWidth}})})},Vt=c.a.forwardRef((function(e,t){var n=e._id,c=e.name,a=e.cards,s=e.placeHolderProps,i="list-content-".concat(n),o=Object(r.useRef)(),l=Object(r.useRef)(),j=Object(r.useState)(!1),m=Object(_.a)(j,2),p=m[0],O=m[1],f=Object(b.d)((function(e){return e.boardReducer.currentBoard._id})),h=Object(b.d)((function(e){return e.boardReducer.currentBoard.lists})),x=Object(r.useState)(),v=Object(_.a)(x,2),g=v[0],y=v[1],D=Object(r.useState)(!1),w=Object(_.a)(D,2),C=w[0],R=w[1],B=Object(r.useState)(!1),E=Object(_.a)(B,2),S=E[0],k=E[1],A=Object(r.useState)(!1),L=Object(_.a)(A,2),T=L[0],M=L[1],P=Object(r.useState)([]),F=Object(_.a)(P,2),H=F[0],V=F[1];Object(r.useEffect)((function(){V(a.map((function(e,t){return we(e)?Object(d.jsx)("span",{}):Object(d.jsx)(Ft.b,{draggableId:"card-".concat(e._id),index:t,children:function(t,r){return Object(d.jsx)("div",Object(u.a)(Object(u.a)(Object(u.a)({className:"card-wrapper",ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(d.jsx)(Pt,Object(u.a)({listName:c,listID:n},e),e._id)}))}},e._id)})))}),[a,h,n,c]);var U=function(){var e=document.querySelector("#".concat(i));e.scrollTop=e.scrollHeight},q=function(){var e=Object(N.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(!0);case 2:U();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(N.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!1),e.next=3,M(!0);case 3:o.current.focus();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){Te(l,M)}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(We,{isOpen:S,setIsOpen:k,hasChoiceButton:!0,confirmMessage:"Are your sure delete this list ?",confirmFunction:function(){return Xe.emit("delete list",{listID:n,boardID:f}),void k(!1)}}),Object(d.jsxs)("div",{ref:t,className:"list",children:[Object(d.jsxs)("div",{className:"list__top",children:[T?Object(d.jsxs)("form",{className:"list__top__rename",onSubmit:function(){return Xe.emit("rename list",{rename:g,listID:n,boardID:f}),void M(!1)},ref:l,children:[Object(d.jsx)("input",{ref:o,className:"list__top__rename__input",type:"text",defaultValue:c,onChange:function(e){return y(e.target.value)}}),Object(d.jsxs)("div",{className:"list__top__rename__btn-wrapper",children:[Object(d.jsx)("button",{type:"submit",className:"list__top__rename__btn-wrapper__check list__top__rename__btn-wrapper__btn",children:"Save"}),Object(d.jsx)("button",{onClick:function(){return M(!1)},type:"button",className:"list__top__rename__btn-wrapper__cancel list__top__rename__btn-wrapper__btn",children:"Cancel"})]})]}):Object(d.jsx)("span",{className:"list__top__title",children:c}),!T&&Object(d.jsx)("button",{className:"list__top__btn-menu",onClick:function(){return R(!0)},children:Object(d.jsx)(_t.a,{})}),Object(d.jsx)(Fe,{top:"28px",right:"-148px",isOpen:C,setIsOpen:R,children:Object(d.jsxs)("ul",{className:"listmenu",children:[Object(d.jsx)("li",{className:"listmenu__item",children:Object(d.jsx)("button",{className:"listmenu__item__btn",onClick:function(){return G()},children:"Rename"})}),Object(d.jsx)("li",{className:"listmenu__item listmenu__divider"}),Object(d.jsx)("li",{className:"listmenu__item",children:Object(d.jsx)("button",{className:"listmenu__item__btn",onClick:function(){return k(!0)},children:"Delete this list"})})]})})]}),Object(d.jsx)(Ft.c,{droppableId:"card-droppable-".concat(n),type:"CARD",children:function(e,t){return Object(d.jsxs)("ul",Object(u.a)(Object(u.a)({id:i,className:"list__content",ref:e.innerRef},e.droppableProps),{},{children:[H,e.placeholder,"CARD"===s.type&&t.isDraggingOver&&Object(d.jsx)(Ht,Object(u.a)({},s)),p&&Object(d.jsx)(gt,{onClick:function(){return q()},isOpen:p,setIsOpen:O,listID:n,isFirstCard:we(a)&&!0})]}))}}),!p&&Object(d.jsx)(gt,{onClick:function(){return q()},isOpen:p,setIsOpen:O,listID:n,scrollBottomReset:U,isFirstCard:we(a)&&!0})]})]})})),Ut=function(e){var t=Object(b.d)((function(e){return e.boardReducer.currentBoard.lists})),n=Object(b.d)((function(e){return e.boardReducer.currentBoard.cards})),c=Object(b.d)((function(e){return e.boardReducer.currentBoard._id})),a=Object(b.d)((function(e){return e.userReducer._id})),s=Object(r.useState)([]),i=Object(_.a)(s,2),o=i[0],l=i[1],j=Object(r.useState)({destinationIndex:null,draggableID:"",currentListOverID:"",type:""}),m=Object(_.a)(j,2),p=m[0],O=m[1],f=Object(r.useState)(!1),h=Object(_.a)(f,2),x=h[0],g=h[1],I=Object(b.c)(),N=function(){p.draggableID&&(Me(p.draggableID).children[0].classList.remove("list-dragged"),O({}))},y=Object(r.useCallback)((function(){return N()}),[N]);Object(r.useEffect)((function(){if(we(t))return console.log("LIST NULL");l(t.map((function(e,t){return Object(d.jsx)(Ft.b,{draggableId:"list-".concat(e._id),index:t,children:function(t,n){return Object(d.jsx)("div",Object(u.a)(Object(u.a)(Object(u.a)({className:"list-wrapper",ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(d.jsx)(Vt,Object(u.a)(Object(u.a)({},e),{},{placeHolderProps:p}))}))}},e._id)})))}),[t,n,p]),Object(r.useEffect)((function(){return document.addEventListener("mouseup",y),function(){return document.removeEventListener("mouseup",y)}}),[p,y]);var D=function(e){if(x){var t=e.target;-1===Math.sign(e.movementX)?t.scrollLeft+=1*Math.abs(e.movementX):1===Math.sign(e.movementX)&&(t.scrollLeft-=1*e.movementX)}};Object(r.useEffect)((function(){document.addEventListener("mouseup",(function(e){g(!1)}))}),[]);var w=function(e){return e.substring(15)},C=function(){var e=document.querySelector("#board");e.scrollLeft=e.scrollWidth};return Object(d.jsx)(Ft.a,{onDragUpdate:function(e){e.destination&&(O({}),O({destinationIndex:e.destination.index,draggableID:e.draggableId,currentListOverID:e.destination.droppableId,type:e.type}))},onDragStart:function(e){Me(e.draggableId).children[0].classList.add("list-dragged"),O({}),O({destinationIndex:e.source.index,draggableID:e.draggableId,type:e.type})},onDragEnd:function(e){if(y(),e.destination){var n=e.source.index,r=e.destination.index;if("LIST"===e.type){var s=function(e,t,n){var r=Object(v.a)(n),c=r.splice(e,1),a=Object(_.a)(c,1)[0];return r.splice(t,0,a),r}(n,r,t);I(de(s,c)),Xe.emit("reorder list",{listsReorder:s,boardID:c,userID:a})}else if("CARD"===e.type){var i=function(e,t,n,r,c){var a=Object(v.a)(c),s=a.findIndex((function(t){return t._id===e})),i=a.findIndex((function(e){return e._id===t}));if(-1===s||-1===i)return a;var o=a[s].cards[n];return a[s].cards.splice(n,1),a[i].cards.splice(r,0,o),a}(w(e.source.droppableId),w(e.destination.droppableId),e.source.index,e.destination.index,t);I(de(i,c)),Xe.emit("reorder list",{listsReorder:i,boardID:c,userID:a})}}},children:Object(d.jsx)(Ft.c,{direction:"horizontal",droppableId:"list-droppable",type:"LIST",children:function(e,t){return Object(d.jsxs)("div",{id:"board",ref:e.innerRef,onMouseDown:function(e){"board"===e.target.id&&g(!0)},onMouseMove:D,onMouseUp:function(){return g(!1)},children:[o,e.placeholder,!we(p)&&"LIST"===p.type&&t.isDraggingOver&&Object(d.jsx)(Ht,Object(u.a)({},p)),Object(d.jsx)(gt,{style:{paddingRight:"25px"},scrollLeftReset:C,isFirstList:we(o)&&!0,isAddList:!0})]})}})})},qt=Object(b.b)()((function(e){var t=Object(o.g)().id,n=Object(b.d)((function(e){return e.boardReducer.currentBoard})),c=Object(b.c)(),a=Object(r.useState)(!1),s=Object(_.a)(a,2),i=s[0],l=s[1],u=Object(r.useState)(!1),j=Object(_.a)(u,2),p=j[0],O=j[1],f=Object(r.useState)(!1),h=Object(_.a)(f,2),x=h[0],v=h[1];return Object(r.useEffect)((function(){var e;return c((e=t,function(t){t(P()),L.get("/board/".concat(e),{withCredentials:!0}).then((function(e){var n=e.data;console.log(n),t({type:U,payload:n})})).catch((function(e){var n=e.response.data;Re(n),t({type:U,payload:"BOARD_ERROR"})})).finally((function(){t(F())}))})),function(){c((function(e){return e({type:G,payload:{}})})),l(!1),O(!1),v(!1)}}),[c,t]),Object(d.jsx)(d.Fragment,{children:"BOARD_ERROR"===n?Object(d.jsx)(jt,{}):Object(d.jsx)($e,{boardName:n.name,pageTitle:"Board - ".concat(n.name),isHeaderBoard:!0,children:Object(d.jsxs)("div",{className:"board",children:[Object(d.jsx)(vt,{isOpen:x,setIsOpen:v}),n.NOT_MEMBER?Object(d.jsx)("p",{className:"board__not-member",children:"This board is public , you can't interact with him if you are not member"}):Object(d.jsxs)("div",{className:"board__top",children:[Object(d.jsxs)("div",{className:"board__top__left",children:[Object(d.jsxs)("span",{children:[Object(d.jsxs)(m,{className:"board__top__left__btn-state",onClick:function(){return O(!0)},children:[Object(d.jsx)(Ve.j,{className:"board__top__left__btn-state__icon"}),n.isPrivate?"Private":"Public"]}),Object(d.jsx)(mt,{isOpen:p,setIsOpen:O})]}),Object(d.jsxs)("div",{className:"board__top__left__members",children:[Object(d.jsx)("ul",{className:"board__top__left__members__list",children:!we(n.members)&&n.members.map((function(e){var t=e.picture,n=e._id,r=e.pseudo;return Object(d.jsx)("li",{className:"board__top__left__members__list__item",children:Object(d.jsx)("img",{src:Ae("user",t),alt:"".concat(r," profil"),style:{width:"100%"}})},n)}))}),Object(d.jsxs)("div",{className:"board__top__left__members__adduser-wrapper",children:[Object(d.jsx)(m,{className:"board__top__left__members__btn-adduser",onClick:function(){return l(!0)},children:Object(d.jsx)(Ve.a,{})}),Object(d.jsx)(bt,{isOpen:i,setIsOpen:l})]})]})]}),Object(d.jsx)("div",{className:"board__top__right",children:Object(d.jsxs)(m,{className:"board__top__right__btn-menu",onClick:function(){return v(!0)},children:[Object(d.jsx)(_t.a,{className:"board__top__right__btn-menu__icon"}),Object(d.jsx)("span",{className:"board__top__right__btn-menu__label",children:"Show Menu"})]})})]}),Object(d.jsx)(Ut,{})]})})})})),Gt=n(150),Wt=function(e){var t=e.component,n=Object(Gt.a)(e,["component"]),r=Object(b.d)((function(e){return e.userReducer}));return Object(d.jsx)(o.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return we(!r)?Object(d.jsx)(o.a,{to:"/login"}):Object(d.jsx)(t,{})}}))},Zt=function(e){var t=Object(b.d)((function(e){return e.userReducer})),n=Object(b.d)((function(e){return e.loaderReducer}));return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(i.a,{children:[!n&&we(t)&&Object(d.jsx)(o.a,{to:"/login"}),Object(d.jsxs)(o.d,{children:[Object(d.jsx)(Wt,{exact:!0,path:"/allboards",component:nt}),Object(d.jsx)(Wt,{exact:!0,path:"/board/:id",component:qt}),Object(d.jsx)(o.b,{exact:!0,path:"/login",component:it}),Object(d.jsx)(o.b,{exact:!0,path:"/register",component:ut}),!we(t)&&"/"===document.location.pathname&&Object(d.jsx)(o.a,{to:"/login"}),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("h1",{children:"Error 404"})})]}),Object(d.jsx)(l,{})]})})},zt=function(e){return Object(d.jsx)("div",{className:"pageloader",children:Object(d.jsx)(lt,{radius:"280"})})},Xt=function(e){var t=e.icon,n=e.info,r=e.type,c=e.onClick,a=e.style;return Object(d.jsxs)("li",{style:a,className:"toast toast-".concat(r),onClick:c,children:[Object(d.jsx)("div",{className:"toast__icon",children:t}),Object(d.jsx)("span",{className:"toast__info",children:n})]})},Yt=n(319),Jt={position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)",zIndex:"9999999",listStyle:"none",wordBreak:"break-all",maxHeight:"100vh"},Kt=function(e){var t=Object(b.d)((function(e){return e.toastReducer})),n=Object(b.c)();return Object(d.jsx)("ul",{style:Jt,children:Object(d.jsx)(Yt.a,{children:t.map((function(e,t){return Object(d.jsx)(qe.a,{appear:!0,timeout:300,classNames:"toast",children:Object(d.jsx)(Xt,{icon:e.icon,info:e.info,type:e.type,onClick:function(){return n((t=e.id,function(e){return e({type:C,payload:t})}));var t}},t+1)},t)}))})})},Qt=function(e){var t=Object(b.c)(),n=Object(r.useCallback)((function(e){t(e)}),[t]);return Object(r.useEffect)((function(){Xe.on("send invitation",(function(e){var t;n((t=e,function(e){return console.log(t),e({type:_e,payload:t})}))})),Xe.on("join board",(function(e){var t=e.user,r=e.board;n(function(e,t){return function(){var n=Object(N.a)(I.a.mark((function n(r){var c;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ye.getState().userReducer;case 2:c=n.sent,console.log(e),r({type:W,payload:{currentUser:c,user:e,board:t}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,r))})),Xe.on("change state",(function(e){var t=e.boardID,r=e.state;n(function(e,t){return function(n){return n({type:Z,payload:{boardID:e,state:t}})}}(t,r))})),Xe.on("ban member",(function(e){var t=e.boardID,r=e.memberBannedID;n(function(e,t){return function(){var n=Object(N.a)(I.a.mark((function n(r){var c;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ye.getState().userReducer;case 2:return c=n.sent,n.abrupt("return",r({type:z,payload:{boardID:e,memberBannedID:t,currentUser:c}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,r))})),Xe.on("change description",(function(e){var t=e.description,r=e.boardID;console.log("change desc scktio"),n(function(e,t){return function(){var n=Object(N.a)(I.a.mark((function n(r){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r({type:X,payload:{description:e,boardID:t}}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,r))})),Xe.on("add list",(function(e){var t=e.listCreated,r=e.boardID,c=e.userID;console.log("add list scktio"),n(function(e,t,n){return function(){var r=Object(N.a)(I.a.mark((function r(c){var a;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=ye.getState().userReducer,r.abrupt("return",c({type:Y,payload:{listCreated:e,boardID:t,userID:n,currentUser:a}}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(t,r,c))})),Xe.on("add card",(function(e){var t=e.cardCreated,r=e.listID,c=e.boardID;e.userID;console.log("add card scktio"),n(function(e,t,n){return function(){var r=Object(N.a)(I.a.mark((function r(c){return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c({type:Q,payload:{cardCreated:e,listID:t,boardID:n}}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(t,r,c))})),Xe.on("rename list",(function(e){var t=e.rename,r=e.listID,c=e.boardID;console.log("rename list scktio"),n(function(e,t,n){return function(){var r=Object(N.a)(I.a.mark((function r(c){return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c({type:ee,payload:{rename:e,listID:t,boardID:n}}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(t,r,c))})),Xe.on("delete list",(function(e){var t=e.listID,r=e.boardID;console.log("delete list scktio"),n(function(e,t){return function(){var n=Object(N.a)(I.a.mark((function n(r){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r({type:$,payload:{listID:e,boardID:t}}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,r))})),Xe.on("reorder list",(function(e){var t=e.listsReorder,r=e.boardID,c=e.userID;console.log("reorder list scktio"),n(de(t,r,c))})),Xe.on("assign member card",(function(e){var t=e.assignedMembers,r=e.boardID,c=e.listID,a=e.cardID;n(function(e,t,n,r){return function(){var c=Object(N.a)(I.a.mark((function c(a){return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",a({type:ne,payload:{assignedMembers:e,boardID:t,listID:n,cardID:r}}));case 1:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(t,r,c,a))})),Xe.on("change card title",(function(e){var t=e.boardID,r=e.listID,c=e.cardID,a=e.cardTitle;n(function(e,t,n,r){return function(){var c=Object(N.a)(I.a.mark((function c(a){return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",a({type:re,payload:{boardID:e,listID:t,cardID:n,cardTitle:r}}));case 1:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(t,r,c,a))})),Xe.on("change card description",(function(e){var t=e.boardID,r=e.listID,c=e.cardID,a=e.description;n(function(e,t,n,r){return function(){var c=Object(N.a)(I.a.mark((function c(a){return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",a({type:ce,payload:{boardID:e,listID:t,cardID:n,description:r}}));case 1:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(t,r,c,a))})),Xe.on("card add label",(function(e){var t=e.boardID,r=e.listID,c=e.cardID,a=e.label;n(function(e,t,n,r){return function(){var c=Object(N.a)(I.a.mark((function c(a){return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",a({type:ae,payload:{boardID:e,listID:t,cardID:n,label:r}}));case 1:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(t,r,c,a))})),Xe.on("card delete label",(function(e){var t=e.boardID,r=e.listID,c=e.cardID,a=e.labelID;n(function(e,t,n,r){return function(){var c=Object(N.a)(I.a.mark((function c(a){return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",a({type:se,payload:{boardID:e,listID:t,cardID:n,labelID:r}}));case 1:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(t,r,c,a))})),Xe.on("card change picture",(function(e){var t=e.boardID,r=e.listID,c=e.cardID,a=e.picture;n(function(e,t,n,r){return function(){var c=Object(N.a)(I.a.mark((function c(a){return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",a({type:ie,payload:{boardID:e,listID:t,cardID:n,picture:r}}));case 1:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(t,r,c,a))})),Xe.on("leave board",(function(e){var t=e.userID,r=e.boardID;console.log("leave board scktio"),n(function(e,t){return function(){var n=Object(N.a)(I.a.mark((function n(r){var c;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=ye.getState().userReducer,n.abrupt("return",r({type:J,payload:{userID:e,boardID:t,currentUser:c}}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,r))})),Xe.on("delete board",(function(e){n(function(e){return function(){var t=Object(N.a)(I.a.mark((function t(n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:K,payload:{boardID:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}))}),[n]),Object(d.jsx)(d.Fragment,{})},$t=function(e){var t=Object(b.d)((function(e){return e.loaderReducer}));return Object(r.useEffect)((function(){document.querySelector("html").style=t?"overflow : hidden":"overflow : visible"}),[t]),Object(d.jsxs)("div",{className:"app",children:[t&&Object(d.jsx)(zt,{}),Object(d.jsx)(Mt,{}),Object(d.jsx)(Qt,{}),Object(d.jsx)(Kt,{}),Object(d.jsx)(Zt,{})]})},en=(n(313),n(316));ye.dispatch((function(e){e(P());var t=new y.a;L.get("/user/rememberme",{withCredentials:!0}).then((function(t){var n=t.data,r=n.user,c=n.token;return Ce(c),Be(Object(d.jsx)(H.b,{}),"Welcome ".concat(r.pseudo," !"),"neutral"),e(oe(r._id)),e({type:ue,payload:r})})).catch((function(n){t.remove("token"),e({type:ue,payload:{}}),console.log("RememberMe error : "+n)})).finally((function(){e(F())}))})),s.a.render(Object(d.jsx)(en.a,{children:Object(d.jsx)(b.a,{store:ye,children:Object(d.jsx)($t,{})})}),document.querySelector("#root"))}},[[314,1,2]]]);
//# sourceMappingURL=main.b8045d7d.chunk.js.map