(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{311:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(33),a=n.n(c),s=n(15),i=n(11),o=n(1),l=function(e){return Object(o.jsx)(o.Fragment,{})},d=n(3),u=n(5),_=n(4),b={cursor:"pointer"},j=function(e){var t=e.children,n=e.type,r=e.onClick,c=e.className,a=e.style;return Object(o.jsx)("button",{type:n,style:Object(d.a)(Object(d.a)({},b),a),className:"".concat(c),onClick:r,children:t})},p=n(30),m=n(39),O=n.n(m),h=n(19),f=n(150),x=n(7),v=n.n(x),g=n(14),N=n(137),y=n(315),w="PUSH_TOAST",C="REMOVE_TOAST",I="CLEAR_TOAST",D=n(43),R=n(135),B=n(10),k=n(136),E=n.n(k).a.create({baseURL:"",responseType:"json"}),S="LOADING",A="END_LOADING",T=function(){return function(e){return e({type:S,payload:!0})}},L=function(){return function(e){return e({type:A,payload:!1})}},P=n(37),H="CREATE_BOARD",M="GET_BOARD",F="GET_ALL_BOARD_BY_USERID",V="CLEAN_CURRENTBOARD",U="JOIN_BOARD",q="CHANGE_STATE",Z="BAN_MEMBER",W="CHANGE_DESCRIPTION",G="ADD_LIST",J="LEAVE_BOARD",z="DELETE_BOARD",Y="ADD_CARD",K="DELETE_LIST",Q=function(e){return function(t){return E.get("/board/getallboardbyuserid/".concat(e)).then((function(e){var n=e.data;t({type:F,payload:n})})).catch((function(e){console.log(e)}))}},X="LOGIN",$="REMEMBER_ME",ee="ADD_NOTIFICATION",te="DELETE_NOTIFICATION",ne=function(e,t,n){return function(r){var c={userID:e,notificationID:t,boardIDRequested:n};return E.post("/user/delete-notification",c).then((function(e){return r({type:te,payload:t})})).catch((function(e){console.log(e)}))}},re={};var ce={currentBoard:{},boards:[]};var ae=[];var se="REDIRECT",ie="CLEAR_REDIRECT";var oe=Object(D.combineReducers)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:case $:return t.payload;case ee:var n=t.payload,r=n.findIndex((function(t){return t._id===e._id}));return-1===r?Object(d.a)({},e):Object(d.a)(Object(d.a)({},e),{},{notifications:[].concat(Object(B.a)(e.notifications),[n[r].notifications])});case te:return Object(d.a)(Object(d.a)({},e),{},{notifications:e.notifications.filter((function(e){return e._id!==t.payload}))});default:return e}},boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(d.a)(Object(d.a)({},e),{},{boards:[].concat(Object(B.a)(e.boards),[t.payload])});case F:return Object(d.a)(Object(d.a)({},e),{},{boards:t.payload});case M:return Object(d.a)(Object(d.a)({},e),{},{currentBoard:t.payload});case V:return Object(d.a)(Object(d.a)({},e),{},{currentBoard:{}});case U:var n=e.boards.findIndex((function(e){return e._id===t.payload.board._id}));return t.payload.currentUser._id===t.payload.user._id?Object(d.a)(Object(d.a)({},e),{},{boards:[].concat(Object(B.a)(e.boards),[t.payload.board])}):t.payload.board._id===e.currentBoard._id&&-1!==n?Object(d.a)(Object(d.a)({},e),{},{currentBoard:Object(d.a)(Object(d.a)({},e.currentBoard),{},{members:[].concat(Object(B.a)(e.currentBoard.members),[t.payload.user])}),boards:e.boards.map((function(e){return e._id===t.payload.board._id&&e.members.push(t.payload.user),e}))}):t.payload.board._id!==e.currentBoard._id&&-1!==n?Object(d.a)(Object(d.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.payload.board._id&&e.members.push(t.payload.user),e}))}):Object(d.a)({},e);case q:return e.currentBoard._id!==t.payload.boardID||e.currentBoard.NOT_MEMBER?e.currentBoard._id===t.payload.boardID&&e.currentBoard.NOT_MEMBER?(document.location.reload(),Object(d.a)(Object(d.a)({},e),{},{currentBoard:{}})):Object(d.a)({},e):Object(d.a)(Object(d.a)({},e),{},{currentBoard:Object(d.a)(Object(d.a)({},e.currentBoard),{},{isPrivate:t.payload.state})});case Z:return e.currentBoard._id===t.payload.boardID?(t.payload.memberBannedID===t.payload.currentUser._id&&document.location.reload(),Object(d.a)(Object(d.a)({},e),{},{currentBoard:Object(d.a)(Object(d.a)({},e.currentBoard),{},{members:e.currentBoard.members.filter((function(e){return e._id!==t.payload.memberBannedID}))}),boards:e.boards.map((function(e){return e._id===t.payload.boardID?(e.members=e.members.filter((function(e){return e._id!==t.payload.memberBannedID})),e):e}))})):-1!==e.boards.findIndex((function(e){return e._id===t.payload.boardID}))&&t.payload.memberBannedID===t.payload.currentUser._id?Object(d.a)(Object(d.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.payload.boardID}))}):Object(d.a)({},e);case W:return e.currentBoard._id===t.payload.boardID?Object(d.a)(Object(d.a)({},e),{},{currentBoard:Object(d.a)(Object(d.a)({},e.currentBoard),{},{description:t.payload.description})}):Object(d.a)({},e);case G:return e.currentBoard._id!==t.payload.boardID||_e(e.currentBoard)?Object(d.a)({},e):Object(d.a)(Object(d.a)({},e),{},{currentBoard:Object(d.a)(Object(d.a)({},e.currentBoard),{},{lists:[].concat(Object(B.a)(e.currentBoard.lists),[t.payload.listCreated])})});case Y:return e.currentBoard._id!==t.payload.boardID||_e(e.currentBoard)?Object(d.a)({},e):Object(d.a)(Object(d.a)({},e),{},{currentBoard:Object(d.a)(Object(d.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.map((function(n){return e.currentBoard._id===t.payload.boardID&&n._id===t.payload.listID&&n.cards.push(t.payload.cardCreated),n}))})});case K:return e.currentBoard._id!==t.payload.boardID||_e(e.currentBoard)?Object(d.a)({},e):Object(d.a)(Object(d.a)({},e),{},{currentBoard:Object(d.a)(Object(d.a)({},e.currentBoard),{},{lists:e.currentBoard.lists.filter((function(e){return e._id!==t.payload.listID}))})});case J:return Object(d.a)(Object(d.a)({},e),{},{currentBoard:Object(d.a)(Object(d.a)({},e.currentBoard),{},{members:e.currentBoard.members.filter((function(n){return n._id!==t.payload.userID||e.currentBoard._id!==t.payload.boardID||(t.payload.currentUser._id===t.payload.userID&&document.location.reload(),!1)}))}),boards:e.boards.filter((function(e){return e._id!==t.payload.boardID||t.payload.currentUser._id!==t.payload.userID}))});case z:var r=e.currentBoard._id===t.payload.boardID?"BOARD_ERROR":Object(d.a)({},e.currentBoard);return Object(d.a)(Object(d.a)({},e),{},{currentBoard:r,boards:e.boards.filter((function(e){return e._id!==t.payload.boardID}))});default:return e}},loaderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:case A:return t.payload;default:return e}},toastReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return[].concat(Object(B.a)(e),[t.payload]);case C:var n=t.payload;return e.filter((function(e){return e.id!==n}));case I:return e.filter((function(e){return!t.payload.includes(e.type)}));default:return e}},redirectReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:case ie:return t.payload;default:return e}}}),le=n(138),de=Object(D.createStore)(oe,Object(R.composeWithDevTools)(Object(D.applyMiddleware)(le.a))),ue=n(29),_e=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},be=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(new N.a).set("token",t,{maxAge:6048e5});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(e){for(var t in e)pe(Object(o.jsx)(ue.b,{}),e[t],"danger")},pe=function(e,t,n){de.dispatch(function(e,t,n){return function(r){var c=Object(y.a)();r({type:w,payload:{id:c,icon:e,info:t,type:n}}),setTimeout((function(){r({type:C,payload:c})}),6e3)}}(e,t,n))},me=function(e){de.dispatch(function(e){return function(t){return t({type:I,payload:e})}}(e))},Oe=function(e){me(["danger","warning"]),pe(Object(o.jsx)(P.a,{}),e,"success")},he=function(e,t){switch(e){case"board":return"".concat("","/board-picture/").concat(t);case"user":return"".concat("","/user-picture/").concat(t);default:console.log("Picture Path Error")}},fe=function(e){return e.replaceAll(/(<[^>]+) style=".*?"/gi,"")},xe=function(e){var t,n,c,a,s,i=e.children,l=e.contentRef,_=e.contentClass,b=e.allowsRef,j=e.isOpen,p=e.setIsOpen,O=e.isResponsive,x=void 0!==O&&O,v=e.maxWidthResponsive,g=void 0===v?600:v,N=e.isVertical,y=void 0===N||N,w=e.title,C=e.description,I=e.top,D=e.right,R=e.bottom,B=e.left,k=e.topResponsive,E=e.rightResponsive,S=e.bottomResponsive,A=e.leftResponsive,T=Object(r.useRef)(),L=y?T:l,P=Object(m.useMediaQuery)({query:"(max-width: ".concat(g,"px)")}),H=Object(r.useState)(null),M=Object(u.a)(H,2),F=M[0],V=M[1],U=y?"maxHeight":"maxWidth",q=(t={transition:"".concat(300,"ms ease")},Object(h.a)(t,U,"0"),Object(h.a)(t,"overflow","hidden"),t),Z={entering:(n={},Object(h.a)(n,U,"".concat(F,"px")),Object(h.a)(n,"overflow","hidden"),n),entered:(c={},Object(h.a)(c,U,"".concat(F,"px")),Object(h.a)(c,"overflow","visible"),c),exiting:(a={},Object(h.a)(a,U,"0"),Object(h.a)(a,"overflow","hidden"),a),exited:(s={},Object(h.a)(s,U,"0"),Object(h.a)(s,"overflow","hidden"),s)};return Object(r.useEffect)((function(){if(j){L.current&&V(y?L.current.getBoundingClientRect().height:L.current.getBoundingClientRect().width);var e=function(e){if(_e(b)){if(!L.current)return p(!1);!L.current.contains(e.target)&&p(!1)}else{if(!L.current||!b.current)return p(!1);L.current.contains(e.target)||b.current.contains(e.target)||p(!1)}};if(window.addEventListener("mousedown",e),!L.current)return p(!1);j||window.removeEventListener("mousedown",e)}}),[j,p,L,y,b]),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"dropdown ".concat(x&&P?"dropdown-responsive":""),style:x&&P?{top:k,right:E,bottom:S,left:A}:{top:I,right:D,bottom:R,left:B},children:Object(o.jsx)(f.a,{unmountOnExit:!0,in:j,timeout:300,children:function(e){return Object(o.jsx)("div",{className:"dropdown__content",style:Object(d.a)(Object(d.a)({},q),Z[e]),children:Object(o.jsxs)("div",{className:"".concat(_),ref:y&&T,children:[w&&C&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{className:"dropdown__content__title",children:w}),Object(o.jsx)("span",{className:"dropdown__content__description",children:C})]}),i]})})}})})})},ve=n(66),ge=n(8),Ne=n(44),ye=n(316),we=n(64),Ce=function(e){var t=e.children,n=e.hasCloseButton,c=void 0!==n&&n,a=e.isOpen,s=e.setIsOpen,i=e.hasChoiceButton,l=void 0!==i&&i,d=e.btnConfirmMessage,_=e.btnConfirmIcon,b=e.confirmMessage,p=e.confirmFunction,m=Object(r.useState)(!1),O=Object(u.a)(m,2),h=O[0],f=O[1],x=Object(r.useRef)();return Object(r.useEffect)((function(){return document.querySelector("html").style=a?"overflow : hidden":"overflow : visible"}),[a]),Object(r.useEffect)((function(){var e=function(e){if(!x.current)return function(){return s(!1)};!x.current.contains(e.target)&&s(!1)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e),document.querySelector("html").style="overflow : visible"}}),[s]),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(ye.a,{in:a,classNames:"modal",appear:!0,timeout:200,onEntered:function(){return f(!0)},onExit:function(){return f(!1)},onExited:function(){return s(!1)},unmountOnExit:!0,children:Object(o.jsx)("div",{className:"modal",children:Object(o.jsx)(ye.a,{in:h,classNames:"modalcontent",appear:!0,timeout:300,unmountOnExit:!0,children:Object(o.jsxs)("div",{ref:x,className:"modal__content",children:[c&&Object(o.jsx)(j,{className:"modal__content__close",onClick:function(){return s(!1)},children:Object(o.jsx)(we.b,{})}),t,l&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{className:"modal__content__confirm-message",children:b}),Object(o.jsxs)("div",{className:"modal__content__btn-wrapper",children:[Object(o.jsx)(j,{className:"modal__content__btn-wrapper__cancel",onClick:function(){return s(!1)},children:"Cancel"}),Object(o.jsxs)(j,{className:"modal__content__btn-wrapper__confirm",onClick:p,children:[_&&Object(o.jsx)("span",{className:"modal__content__btn-wrapper__confirm__icon",children:_}),Object(o.jsx)("span",{className:"modal__content__btn-wrapper__confirm__label",children:d||"Confirm"})]})]})]})]})})})})})},Ie=n(140),De=n(139),Re=Object(De.io)(""),Be=function(e){var t=e.isOpen,n=e.setIsOpen,r=Object(_.d)((function(e){return e.userReducer})),c=Object(_.c)();return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(Ce,{isOpen:t,setIsOpen:n,hasCloseButton:!0,children:Object(o.jsxs)("div",{className:"profilmenu__notifications",children:[Object(o.jsxs)("span",{className:"profilmenu__notifications__top",children:[Object(o.jsx)(ge.i,{className:"profilmenu__notifications__top__icon"}),"Notifications"]}),Object(o.jsx)("ul",{className:"profilmenu__notifications__list",children:_e(r.notifications)?Object(o.jsx)("h4",{style:{textAlign:"center",marginTop:"20px"},children:"You don't have notifications"}):r.notifications.map((function(e){var t=e._id,n=e.title,a=e.message,s=e.boardIDRequested;return Object(o.jsxs)("li",{className:"profilmenu__notifications__list__item",children:[Object(o.jsxs)("div",{className:"profilmenu__notifications__list__item__right",children:[Object(o.jsx)(Ie.a,{className:"profilmenu__notifications__list__item__right__icon"}),Object(o.jsxs)("div",{className:"profilmenu__notifications__list__item__right__content",children:[Object(o.jsx)("span",{className:"profilmenu__notifications__list__item__right__content__title",children:n}),Object(o.jsx)("span",{className:"profilmenu__notifications__list__item__right__content__message",children:a})]})]}),Object(o.jsxs)("div",{className:"profilmenu__notifications__list__item__left",children:[Object(o.jsx)(j,{className:"profilmenu__notifications__list__item__left__btn-valid",onClick:function(){return function(e,t){var n={userID:r._id,boardID:e};Re.emit("join board",n),c(ne(r._id,t))}(s,t)},children:Object(o.jsx)(ge.b,{})}),Object(o.jsx)(j,{className:"profilmenu__notifications__list__item__left__btn-wrong",onClick:function(){return c(ne(r._id,t,s))},children:Object(o.jsx)(Ne.c,{})})]})]},t)}))})]})})})},ke=n(313),Ee=function(e){var t=e.isOpen,n=e.setIsOpen,c=Object(r.useState)(!1),a=Object(u.a)(c,2),s=a[0],i=a[1],l=Object(_.d)((function(e){return e.userReducer})),d=Object(ke.a)(),b=Object(u.a)(d,3)[2];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Be,{isOpen:s,setIsOpen:i}),Object(o.jsx)(xe,{contentClass:"profilmenu",isOpen:t,setIsOpen:n,top:"50px",right:"0",children:Object(o.jsx)("div",{children:Object(o.jsxs)("ul",{className:"profilmenu__navlist",children:[Object(o.jsx)("li",{children:Object(o.jsxs)("button",{className:"profilmenu__navlist__item",children:[Object(o.jsx)(ve.a,{className:"profilmenu__navlist__item__icon"}),"Profil"]})}),Object(o.jsx)("li",{onClick:function(){return i(!0)},children:Object(o.jsxs)("button",{className:"profilmenu__navlist__item",children:[Object(o.jsx)(ge.i,{className:"profilmenu__navlist__item__icon"}),"Notifications",!_e(l.notifications)&&Object(o.jsx)("span",{className:"bubble-notifications",style:{fontSize:l.notifications.length>99&&"0.6rem"},children:l.notifications.length>99?"99+":l.notifications.length})]})}),Object(o.jsx)("li",{className:"profilmenu__navlist__divider"}),Object(o.jsx)("li",{children:Object(o.jsxs)("button",{className:"profilmenu__navlist__item",onClick:function(){b("token",{path:"/"}),document.location.reload()},children:[Object(o.jsx)(ue.c,{className:"profilmenu__navlist__item__icon profilmenu__navlist__item__icon--logout"}),"Logout"]})})]})})})]})},Se=function(e){var t=e.isHeaderBoard,n=e.boardName,c=Object(_.d)((function(e){return e.userReducer})),a=Object(r.useState)(!1),i=Object(u.a)(a,2),l=i[0],d=i[1],b=Object(r.useState)(!1),m=Object(u.a)(b,2),h=m[0],f=m[1],x=Object(r.useState)(1),v=Object(u.a)(x,2),g=v[0],N=v[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("header",{className:"header",children:[Object(o.jsxs)("div",{className:"header__left",children:[Object(o.jsxs)(s.b,{className:"header__left__logo",to:"/allboards",children:[Object(o.jsx)(O.a,{minWidth:"650px",children:Object(o.jsxs)("svg",{width:"98",height:"29",viewBox:"0 0 98 29",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("path",{d:"M54.3311 8.436V10.47H50.9831V21H48.4631V10.47H45.1151V8.436H54.3311ZM61.1557 10.884C61.9117 10.884 62.5837 11.052 63.1717 11.388C63.7597 11.712 64.2157 12.198 64.5397 12.846C64.8757 13.482 65.0437 14.25 65.0437 15.15V21H62.5237V15.492C62.5237 14.7 62.3257 14.094 61.9297 13.674C61.5337 13.242 60.9937 13.026 60.3097 13.026C59.6137 13.026 59.0617 13.242 58.6537 13.674C58.2577 14.094 58.0597 14.7 58.0597 15.492V21H55.5397V7.68H58.0597V12.27C58.3837 11.838 58.8157 11.502 59.3557 11.262C59.8957 11.01 60.4957 10.884 61.1557 10.884ZM76.2241 11.028V21H73.6861V19.74C73.3621 20.172 72.9361 20.514 72.4081 20.766C71.8921 21.006 71.3281 21.126 70.7161 21.126C69.9361 21.126 69.2461 20.964 68.6461 20.64C68.0461 20.304 67.5721 19.818 67.2241 19.182C66.8881 18.534 66.7201 17.766 66.7201 16.878V11.028H69.2401V16.518C69.2401 17.31 69.4381 17.922 69.8341 18.354C70.2301 18.774 70.7701 18.984 71.4541 18.984C72.1501 18.984 72.6961 18.774 73.0921 18.354C73.4881 17.922 73.6861 17.31 73.6861 16.518V11.028H76.2241ZM80.6005 7.68V21H78.0805V7.68H80.6005ZM84.9803 7.68V21H82.4603V7.68H84.9803ZM91.268 21.162C90.308 21.162 89.444 20.952 88.676 20.532C87.908 20.1 87.302 19.494 86.858 18.714C86.426 17.934 86.21 17.034 86.21 16.014C86.21 14.994 86.432 14.094 86.876 13.314C87.332 12.534 87.95 11.934 88.73 11.514C89.51 11.082 90.38 10.866 91.34 10.866C92.3 10.866 93.17 11.082 93.95 11.514C94.73 11.934 95.342 12.534 95.786 13.314C96.242 14.094 96.47 14.994 96.47 16.014C96.47 17.034 96.236 17.934 95.768 18.714C95.312 19.494 94.688 20.1 93.896 20.532C93.116 20.952 92.24 21.162 91.268 21.162ZM91.268 18.966C91.724 18.966 92.15 18.858 92.546 18.642C92.954 18.414 93.278 18.078 93.518 17.634C93.758 17.19 93.878 16.65 93.878 16.014C93.878 15.066 93.626 14.34 93.122 13.836C92.63 13.32 92.024 13.062 91.304 13.062C90.584 13.062 89.978 13.32 89.486 13.836C89.006 14.34 88.766 15.066 88.766 16.014C88.766 16.962 89 17.694 89.468 18.21C89.948 18.714 90.548 18.966 91.268 18.966Z",fill:"#333333",className:"header__left__logo__label"}),Object(o.jsx)("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H10C12.2091 0 14 1.79086 14 4V25C14 27.2091 12.2091 29 10 29H4C1.79086 29 0 27.2091 0 25V4Z",fill:"#2F80ED",className:"header__left__logo__left"}),Object(o.jsx)("path",{d:"M18 4C18 1.79086 19.7909 0 22 0H28C30.2091 0 32 1.79086 32 4V14C32 16.2091 30.2091 18 28 18H22C19.7909 18 18 16.2091 18 14V4Z",fill:"#2F80ED",className:"header__left__logo__right"})]})}),Object(o.jsx)(O.a,{maxWidth:"649px",children:Object(o.jsxs)("svg",{width:"32",height:"29",viewBox:"0 0 32 29",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H10C12.2091 0 14 1.79086 14 4V25C14 27.2091 12.2091 29 10 29H4C1.79086 29 0 27.2091 0 25V4Z",fill:"#2F80ED",className:"header__left__logo__left"}),Object(o.jsx)("path",{d:"M18 4C18 1.79086 19.7909 0 22 0H28C30.2091 0 32 1.79086 32 4V14C32 16.2091 30.2091 18 28 18H22C19.7909 18 18 16.2091 18 14V4Z",fill:"#2F80ED",className:"header__left__logo__right"})]})})]}),t&&Object(o.jsxs)("div",{className:"header__left__board",children:[Object(o.jsx)("h2",{className:"header__left__board__name",children:n}),Object(o.jsx)("span",{className:"header__left__board__divider"}),Object(o.jsxs)(s.b,{to:"/allboards",className:"header__left__board__btn-allboard",children:[Object(o.jsx)(p.c,{className:"header__left__board__btn-allboard__icons"}),Object(o.jsx)("span",{className:"header__left__board__btn-allboard__label",children:"All board"})]})]})]}),Object(o.jsxs)("div",{className:"header__right",children:[Object(o.jsx)(O.a,{minWidth:"1100px",children:Object(o.jsxs)("div",{className:"header__right__search",children:[Object(o.jsx)("input",{className:"header__right__search__input",type:"text",placeholder:"Keyword..."}),Object(o.jsx)(j,{className:"header__right__search__button",onClick:function(){pe(Object(o.jsx)(p.b,{}),"test ".concat(g),"success"),N(g+1)},children:"Search"})]})}),Object(o.jsx)(O.a,{maxWidth:"1099px",children:Object(o.jsxs)("div",{className:"header__right__search__responsive",children:[Object(o.jsx)(j,{className:"header__right__search__responsive__button",onClick:function(){return d(!0)},children:"Search"}),Object(o.jsx)(xe,{left:"-170px",top:"46px",isOpen:l,setIsOpen:d,children:Object(o.jsx)("div",{className:"header__right__search__responsive__dropdown__wrapper",children:Object(o.jsx)("input",{className:"header__right__search__responsive__dropdown__wrapper__input ",type:"text",placeholder:"Keyword..."})})})]})}),Object(o.jsxs)("button",{className:"header__right__profil",onClick:function(){return f(!0)},children:[Object(o.jsx)("img",{className:"header__right__profil__img",src:he("user",c.picture),alt:"p"}),Object(o.jsx)("span",{className:"header__right__profil__name",children:c.pseudo}),Object(o.jsx)("span",{className:"header__right__profil__icon",children:Object(o.jsx)(p.b,{})}),!_e(c.notifications)&&Object(o.jsx)("span",{className:"bubble-notifications",style:{fontSize:c.notifications.length>99&&"0.6rem"},children:c.notifications.length>99?"99+":c.notifications.length})]}),Object(o.jsx)(Ee,{isOpen:h,setIsOpen:f})]})]})})},Ae=function(e){var t=e.pageTitle,n=e.children,r=e.isHeaderBoard,c=void 0!==r&&r,a=e.boardName,s=e.hasHeader,i=void 0===s||s,l=Object(_.d)((function(e){return e.loaderReducer}));return document.title="Thullo | ".concat(l?"Loading . . .":t),Object(o.jsxs)(o.Fragment,{children:[i&&Object(o.jsx)(Se,{isHeaderBoard:c,boardName:a}),n]})},Te=function(e){var t=e.isOpen,n=e.setIsOpen,c=Object(_.c)(),a=Object(_.d)((function(e){return e.userReducer})),s=Object(r.useState)(""),i=Object(u.a)(s,2),l=i[0],b=i[1],p=Object(r.useState)({name:"",picture:"",isPrivate:!1,owner:a._id}),m=Object(u.a)(p,2),O=m[0],h=m[1];Object(r.useEffect)((function(){t||(b(""),h({name:"",picture:"",isPrivate:!1,owner:""}))}),[t]);var f=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files[0]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.target.files[0];case 4:return n=e.sent,h(Object(d.a)(Object(d.a)({},O),{},{picture:n})),e.next=8,URL.createObjectURL(n);case 8:r=e.sent,b(r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=new FormData;e.append("name",O.name),e.append("picture",O.picture),e.append("isPrivate",O.isPrivate),e.append("owner",a._id),n(!1),c(function(e){return function(t){return E.post("/board/create",e).then((function(e){console.log(e);var n=e.data;t({type:H,payload:n}),Oe("Board ".concat(n.name," create !"))})).catch((function(e){var t=e.response.data;je(t)}))}}(e))};return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(Ce,{hasCloseButton:!0,isOpen:t,setIsOpen:n,hasChoiceButton:!0,btnConfirmIcon:Object(o.jsx)(ue.a,{}),btnConfirmMessage:"Create",confirmFunction:function(){return x()},children:Object(o.jsxs)("div",{className:"createboardmodal",children:[Object(o.jsxs)("label",{className:"createboardmodal__input__image ".concat(l?"":"no-preview"),htmlFor:"boardmodal_input_image",style:{backgroundImage:"url(".concat(l,")")},children:[Object(o.jsx)("div",{className:"".concat(l?"preview-background":""),children:Object(o.jsx)(Ne.a,{className:"createboardmodal__input__image__icon ".concat(l?"preview-active":"")})}),Object(o.jsx)("input",{type:"file",id:"boardmodal_input_image",onChange:f,accept:".png , .jpg , .jpeg",hidden:!0})]}),Object(o.jsx)("input",{value:O.name,onChange:function(e){return h(Object(d.a)(Object(d.a)({},O),{},{name:e.target.value}))},maxLength:"20",className:"createboardmodal__input__name",type:"text",placeholder:"Add board title"}),Object(o.jsxs)("div",{className:"createboardmodal__button__wrapper",children:[Object(o.jsxs)(j,{className:"createboardmodal__button__wrapper__item",children:[Object(o.jsx)(ge.f,{className:"createboardmodal__button__wrapper__item__icon"})," ","Cover"]}),Object(o.jsxs)(j,{className:"createboardmodal__button__wrapper__item ".concat(O.isPrivate?"isStateActiveCreateBoard":""),onClick:function(){return h((function(e){return e.isPrivate=!e.isPrivate,Object(d.a)({},e)}))},children:[Object(o.jsx)(ge.h,{className:"createboardmodal__button__wrapper__item__icon"})," ","Private"]})]})]})})})},Le=function(e){var t=e._id,n=e.name,r=e.picture,c=e.members;return Object(o.jsxs)(s.b,{to:"/board/".concat(t),className:"allboards__container__items",children:[Object(o.jsx)("img",{className:"allboards__container__items__img",src:he("board",r),alt:"board ".concat(n)}),Object(o.jsx)("span",{className:"allboards__container__items__title",children:n}),Object(o.jsx)("ul",{className:"allboards__container__items__members",children:c.map((function(e,t){var n=e._id,r=e.pseudo,a=e.picture;return 3===t?Object(o.jsxs)("span",{className:"allboards__container__items__members__others",children:["+",c.length-3," Others"]},Object(y.a)()):Object(o.jsx)("li",{className:"allboards__container__items__members__profil",children:Object(o.jsx)("img",{src:he("user",a),alt:"".concat(r," profil")})},n)})).slice(0,4)})]})},Pe=function(){var e=Object(_.d)((function(e){return e.boardReducer.boards})),t=Object(r.useState)(!1),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Te,{isOpen:c,setIsOpen:a}),Object(o.jsx)(Ae,{pageTitle:"Allboards",children:Object(o.jsxs)("div",{className:"allboards",children:[Object(o.jsxs)("div",{className:"allboards__top",children:[Object(o.jsx)("h1",{className:"allboards__top__title",children:"All Boards"}),Object(o.jsxs)(j,{className:"allboards__top__btn",onClick:function(){return a(!0)},children:[Object(o.jsx)(ue.a,{className:"allboards__top__btn__icon"}),Object(o.jsx)("span",{className:"allboards__top__btn__label",children:"Add"})]})]}),Object(o.jsx)("div",{className:"allboards__container",children:!_e(e)&&e.map((function(e){return Object(o.jsx)(Le,Object(d.a)({},e),e._id)}))})]})})]})},He=n.p+"static/media/Logo.e207370e.svg",Me={height:"80vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},Fe={height:"50px",position:"absolute",top:"15px",left:"15px"},Ve=function(e){var t=e.children,n=Object(_.d)((function(e){return e.userReducer}));return Object(o.jsxs)(o.Fragment,{children:[!_e(n)&&Object(o.jsx)(i.a,{to:"/allboards"}),Object(o.jsxs)("div",{className:"auth",children:[Object(o.jsx)("img",{style:Fe,src:He,alt:"Thullo"}),Object(o.jsx)("div",{style:Me,children:t})]})]})},Ue=function(e){var t=Object(_.c)(),n=Object(r.useState)({email:"",password:""}),c=Object(u.a)(n,2),a=c[0],i=c[1];return Object(o.jsx)(Ae,{pageTitle:"Login",hasHeader:!1,children:Object(o.jsx)(Ve,{children:Object(o.jsxs)("form",{className:"auth__component",onSubmit:function(e){e.preventDefault(),t(function(e){return function(t){E.post("/user/login",e).then((function(e){var n=e.data,r=n.user,c=n.token;return be(c),me(["danger","warning"]),pe(Object(o.jsx)(P.b,{}),"Welcome ".concat(r.pseudo," !"),"neutral"),t(Q(r._id)),t({type:X,payload:r})})).catch((function(e){var t=e.response.data;je(t)}))}}(a))},noValidate:!0,children:[Object(o.jsx)("h1",{className:"auth__title",children:"Login"}),Object(o.jsx)("div",{className:"auth__input__wrapper",children:Object(o.jsx)("input",{className:"auth__input",type:"email",placeholder:"Email",value:a.email,autoComplete:"on",onChange:function(e){return i(Object(d.a)(Object(d.a)({},a),{},{email:e.target.value}))}})}),Object(o.jsx)("div",{className:"auth__input__wrapper",children:Object(o.jsx)("input",{className:"auth__input",type:"password",placeholder:"Password",value:a.password,onChange:function(e){return i(Object(d.a)(Object(d.a)({},a),{},{password:e.target.value}))}})}),Object(o.jsx)(j,{className:"auth__btn",children:"Connexion"}),Object(o.jsxs)("p",{className:"auth__has-account",children:["You don't have account ? ",Object(o.jsx)(s.b,{to:"/register",children:"Register"})]})]})})})},qe=n(149),Ze=n(40),We=function(e){var t=e.radius,n=e.color,r=void 0===n?"#2f80ed":n;return Object(o.jsxs)("svg",{className:"loader",height:2*t||100,width:2*t||100,children:[Object(o.jsx)("circle",{className:"loader__inset",cx:.8*t||50,cy:.8*t||50,r:.8*t/2||25,strokeWidth:.03*t,stroke:r}),Object(o.jsx)("circle",{className:"loader__around",cx:t||50,cy:t||50,r:t/2||25,strokeWidth:.03*t,stroke:r})]})},Ge=function(e){var t=Object(r.useState)({}),n=Object(u.a)(t,2),c=n[0],a=n[1],l=Object(r.useState)(!1),_=Object(u.a)(l,2),b=_[0],m=_[1],O=Object(r.useState)(!1),h=Object(u.a)(O,2),f=h[0],x=h[1],v=Object(qe.a)({initialValues:{pseudo:"",email:"",password:"",confirmPassword:""},validationSchema:Ze.a({pseudo:Ze.c().min(4,"Pseudo should have 4 characters minimum").max(12,"Pseudo should have 12 characters maximum").required("Required"),email:Ze.c().required("Email address is required").email("Invalid email address"),password:Ze.c().min(6,"Password should have 6 characters minimum").required("Password is required"),confirmPassword:Ze.c().required("Please confirm your password").oneOf([Ze.b("password"),null],"Password must matched")}),onSubmit:function(e){!function(e){f||(x(!0),E.post("/user/register",e).then((function(e){a({}),me(["danger","warning"]),pe(Object(o.jsx)(p.a,{}),"Sign Up Successful","success"),m(!0)})).catch((function(e){var t=e.response.data;je(t),a(e.response.data)})).finally((function(){x(!1)})))}({pseudo:e.pseudo,email:e.email,password:e.password})}});return Object(o.jsxs)(o.Fragment,{children:[b&&Object(o.jsx)(i.a,{to:"/login"}),Object(o.jsx)(Ae,{pageTitle:"Register",hasHeader:!1,children:Object(o.jsx)(Ve,{children:Object(o.jsxs)("form",{className:"auth__component",onSubmit:v.handleSubmit,noValidate:!0,children:[Object(o.jsx)("h1",{className:"auth__title",children:"Register"}),Object(o.jsxs)("div",{className:"auth__input__wrapper",children:[Object(o.jsx)("input",Object(d.a)({className:"auth__input",type:"text"},v.getFieldProps("pseudo"))),Object(o.jsx)("span",{className:"placeholder ".concat(v.values.pseudo&&"placeholder_active"),children:"Pseudo"})]}),v.touched.pseudo&&v.errors.pseudo&&Object(o.jsx)("p",{className:"auth__error",children:v.errors.pseudo}),Object(o.jsxs)("div",{className:"auth__input__wrapper",children:[Object(o.jsx)("input",Object(d.a)({className:"auth__input",type:"email"},v.getFieldProps("email"))),Object(o.jsx)("span",{className:"placeholder ".concat(v.values.email&&"placeholder_active"),children:"Email"})]}),v.touched.email&&v.errors.email&&Object(o.jsx)("p",{className:"auth__error",children:v.errors.email}),c&&Object(o.jsx)("p",{className:"auth__error",children:c.message}),Object(o.jsxs)("div",{className:"auth__input__wrapper",children:[Object(o.jsx)("input",Object(d.a)({className:"auth__input",type:"password"},v.getFieldProps("password"))),Object(o.jsx)("span",{className:"placeholder ".concat(v.values.password&&"placeholder_active"),children:"Password"})]}),v.touched.password&&v.errors.password&&Object(o.jsx)("p",{className:"auth__error",children:v.errors.password}),Object(o.jsxs)("div",{className:"auth__input__wrapper",children:[Object(o.jsx)("input",Object(d.a)({className:"auth__input",type:"password"},v.getFieldProps("confirmPassword"))),Object(o.jsx)("span",{className:"placeholder ".concat(v.values.confirmPassword&&"placeholder_active"),children:"Confirm Password"})]}),v.touched.confirmPassword&&v.errors.confirmPassword&&Object(o.jsx)("p",{className:"auth__error",children:v.errors.confirmPassword}),Object(o.jsx)(j,{type:"submit",className:"auth__btn",style:{position:"relative"},children:f?Object(o.jsx)(We,{color:"white",radius:"28"}):"Register"}),Object(o.jsxs)("p",{className:"auth__has-account",children:["You have already account ? ",Object(o.jsx)(s.b,{to:"/login",children:"Connexion"})]})]})})})]})},Je=n(46),ze=function(e){var t=e.isOpen,n=e.setIsOpen,c=Object(_.d)((function(e){return e.boardReducer.currentBoard})),a=Object(_.d)((function(e){return e.userReducer})),s=Object(r.useState)([]),i=Object(u.a)(s,2),l=i[0],d=i[1],b=Object(r.useState)([]),p=Object(u.a)(b,2),m=p[0],O=p[1],h=Object(r.useState)([]),f=Object(u.a)(h,2),x=f[0],v=f[1],g=Object(r.useState)(""),N=Object(u.a)(g,2),y=N[0],w=N[1];Object(r.useEffect)((function(){_e(c)||E.get("/user/all/".concat(c._id)).then((function(e){d(e.data),v(e.data)})).catch((function(e){console.log(e)}))}),[c]);return Object(o.jsxs)(xe,{contentClass:"invitemember",isResponsive:!0,isOpen:t,setIsOpen:n,top:"40px",left:"-4px",title:"Invite to Board",description:"Search users you want to invite to",children:[Object(o.jsxs)("div",{className:"invitemember__input__wrapper",children:[Object(o.jsx)("input",{className:"invitemember__input__wrapper__input",placeholder:"User...",type:"text",value:y,onChange:function(e){return w(e.target.value)}}),Object(o.jsx)(j,{className:"invitemember__input__wrapper__btn",onClick:function(){v(l.filter((function(e){return e.pseudo.includes(y)})))},children:Object(o.jsx)(Je.b,{})})]}),!_e(x)&&Object(o.jsx)("ul",{className:"invitemember__suggest",children:x.map((function(e,t){var n=e._id,r=e.pseudo,c=e.picture;return Object(o.jsx)("li",{style:{marginBottom:t===x.length-1?"":"15px"},children:Object(o.jsxs)("button",{className:"invitemember__suggest__item",onClick:function(){return e=n,void(-1===m.findIndex((function(t){return t===e}))?O([].concat(Object(B.a)(m),[e])):O(m.filter((function(t){return t!==e}))));var e},children:[Object(o.jsx)("img",{className:"invitemember__suggest__item__picture",src:he("user",c),alt:"user ".concat(r)}),Object(o.jsx)("span",{className:"invitemember__suggest__item__pseudo",children:r}),m.includes(n)?Object(o.jsx)(P.a,{className:"invitemember__suggest__item__icon invitemember__suggest__item__icon--select"}):Object(o.jsx)(we.a,{className:"invitemember__suggest__item__icon"})]})},n)}))}),Object(o.jsx)(j,{className:"invitemember__btn-invite ".concat(_e(m)?"invitemember__btn-invite--disabled":""),onClick:function(){return!_e(m)&&function(){var e={senderPseudo:a.pseudo,guestUserIDList:m,boardID:c._id,boardName:c.name};d(l.filter((function(e){return!m.includes(e._id)}))),v(x.filter((function(e){return!m.includes(e._id)}))),Re.emit("send invitation",e)}()},children:"Invite"})]})},Ye=function(e){return Object(o.jsxs)(Ae,{pageTitle:"Board Error",children:[Object(o.jsx)("h1",{children:"Board not found or is Private"}),Object(o.jsx)(s.b,{to:"/allboards",children:"Back to home"})]})},Ke=function(e){var t=e.isOpen,n=e.setIsOpen,r=Object(_.d)((function(e){return e.boardReducer.currentBoard})),c=function(e){if(r.isPrivate!==e){var t=r._id;n(!1),Re.emit("change state",{boardID:t,state:e})}};return Object(o.jsxs)(xe,{contentClass:"privateorpublic",left:"-6px",isOpen:t,setIsOpen:n,title:"Visibility",description:"Choose who can see to this board.",children:[Object(o.jsxs)("button",{className:"privateorpublic__btn ".concat(r.isPrivate?"":"privateorpublic-active"),style:{marginBottom:"8px"},onClick:function(){return c(!1)},children:[Object(o.jsxs)("div",{className:"privateorpublic__btn__top",children:[Object(o.jsx)(ge.j,{className:"privateorpublic__btn__top__icon"}),Object(o.jsx)("span",{children:"Public"})]}),Object(o.jsx)("p",{className:"privateorpublic__btn__desc",children:"Anyone on the internet can see this."})]}),Object(o.jsxs)("button",{className:"privateorpublic__btn ".concat(r.isPrivate?"privateorpublic-active":""),onClick:function(){return c(!0)},children:[Object(o.jsxs)("div",{className:"privateorpublic__btn__top",children:[Object(o.jsx)(Ne.b,{className:"privateorpublic__btn__top__icon"}),Object(o.jsx)("span",{children:"Private"})]}),Object(o.jsx)("p",{className:"privateorpublic__btn__desc",children:"Only board members can see this"})]})]})},Qe=n(147),Xe=n(146),$e=function(e){var t=e.isOpen,n=e.setIsOpen,c=e.allowsRef,a=Object(r.useState)([]),s=Object(u.a)(a,2),i=s[0],l=s[1];return Object(r.useEffect)((function(){E.get("https://emoji-api.com/categories/travel-places?access_key=c73293510309d49f6b5de5ad0badf72689ddf3ec").then((function(e){l(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(o.jsx)(xe,{allowsRef:c,isOpen:t,setIsOpen:n,bottom:"-160px",right:"-8px",children:Object(o.jsxs)("div",{className:"emojipicker",children:[Object(o.jsx)("div",{className:"emojipicker__category",children:Object(o.jsx)("button",{className:"emojipicker__category__btn-close",onClick:function(){return n(!1)},children:Object(o.jsx)(Xe.a,{})})}),Object(o.jsx)("div",{className:"emojipicker__content",children:i.map((function(e,t){return Object(o.jsx)("button",{className:"emojipicker__content__item",children:e.character},t)}))})]})})},et=800,tt=function(e){var t=e.setIsOpen,n=e.currentDescription,c=e.boardID,a=Object(r.useState)(""),s=Object(u.a)(a,2),i=s[0],l=s[1],d=Object(r.useState)(!1),_=Object(u.a)(d,2),b=_[0],p=_[1],m=Object(r.useRef)(),O=Object(r.useRef)(),h=Object(r.useRef)(),f=function(e){return e.replaceAll(/\*[a-z0-1A-Z]+/g,'<span class="description-word-important">$&</span>')},x=function(){var e=Object(g.a)(v.a.mark((function e(){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==h.current.innerHTML){e.next=2;break}return e.abrupt("return",t(!1));case 2:if(!(i.length>et)){e.next=4;break}return e.abrupt("return",(a="Description is too long (max chars : ".concat(et,")"),me(["danger","warning"]),void pe(Object(o.jsx)(ue.b,{}),a,"warning")));case 4:r=fe(h.current.innerHTML),Re.emit("change description",{description:r,boardID:c}),t(!1);case 7:case"end":return e.stop()}var a}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){h.current.innerHTML=n,O.current.innerHTML=h.current.innerHTML.replaceAll(/class="[a-zA-Z0-9:;.\s()\-,]*"/gi,""),l(h.current.textContent)}),[O,n]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"editdescription__wrapper",ref:m,children:[Object(o.jsx)("div",{onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),function(e,t){var n=e.current.ownerDocument.defaultView.getSelection(),r=n.getRangeAt(0),c=document.createTextNode(String.fromCodePoint(t));r.insertNode(c),r.setStartAfter(c),r.setEndAfter(c),n.removeAllRanges(),n.addRange(r)}(O,9),h.current.innerHTML=f(O.current.innerHTML))},spellCheck:!1,onInput:function(e){l(e.target.textContent),h.current.innerHTML=fe(f(e.target.innerHTML))},ref:O,className:"editdescription__wrapper__input",contentEditable:!0}),Object(o.jsx)("div",{ref:h,className:"editdescription__wrapper__output"}),Object(o.jsx)("button",{className:"editdescription__wrapper__btn-emoji",onClick:function(){return p(!0)},children:Object(o.jsx)(ge.g,{})}),Object(o.jsx)($e,{allowsRef:m,isOpen:b,setIsOpen:p})]}),Object(o.jsxs)("div",{className:"editdescription__chars-wrapper",children:[Object(o.jsxs)("span",{className:"editdescription__chars-wrapper__item",children:["max chars : ",et]}),Object(o.jsxs)("span",{className:"editdescription__chars-wrapper__item ".concat(i.length>et?"maxchars-error":""),children:["current chars : ",i.length]})]}),Object(o.jsxs)("div",{className:"editdescription__btn-wrapper",children:[Object(o.jsx)(j,{className:"editdescription__btn-wrapper__btn-send",onClick:function(){return x()},children:"Save"}),Object(o.jsx)("button",{className:"editdescription__btn-wrapper__btn-cancel",onClick:function(){return t(!1)},children:"Cancel"})]})]})},nt=function(e){var t=e.isOpen,n=e.setIsOpen,c=Object(r.useRef)(),a=Object(r.useRef)(),s=Object(_.d)((function(e){return e.boardReducer.currentBoard})),i=Object(_.d)((function(e){return e.userReducer})),l=Object(r.useState)(!1),d=Object(u.a)(l,2),b=d[0],j=d[1],p=function(){return!_e(i)&&!_e(s)&&s.owner._id===i._id},m=function(){if(!_e(s)){var e=s.createdAt,t=e.substring(0,4),n=["January","February","March","April","May","June","July","August","September","October","November","December"][("0"===e[5]?e.substring(6,7):e.substring(5,7))-1],r=e.substring(8,10);return"on ".concat(r," ").concat(n,", ").concat(t," ")}};m();return Object(r.useEffect)((function(){!_e(s.description)&&c.current&&(c.current.innerHTML=s.description)}),[s.description,t,b]),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(xe,{isVertical:!1,contentRef:a,isOpen:t,setIsOpen:n,top:"-4px",right:"-8px",children:Object(o.jsxs)("div",{className:"boardmenu",ref:a,children:[Object(o.jsxs)("div",{className:"boardmenu__top",children:[Object(o.jsx)("h3",{className:"boardmenu__top__name",children:s.name}),Object(o.jsx)("button",{className:"boardmenu__top__btn-close",onClick:function(){return n(!1)},children:Object(o.jsx)(Qe.a,{})})]}),Object(o.jsxs)("div",{className:"boardmenu__content",children:[Object(o.jsxs)("div",{className:"boardmenu__content__creator",children:[Object(o.jsxs)("span",{className:"boardmenu__content__title",children:[Object(o.jsx)(ve.b,{className:"boardmenu__content__title__icon"}),Object(o.jsx)("span",{className:"boardmenu__content__title__label",children:"Made by"})]}),Object(o.jsxs)("div",{className:"boardmenu__content__creator__profil",children:[Object(o.jsx)("img",{className:"boardmenu__content__creator__profil__img",src:!_e(s)&&he("user",s.owner.picture),alt:"owner ".concat(!_e(s)&&s.owner.pseudo)}),Object(o.jsxs)("div",{className:"boardmenu__content__creator__profil__infos",children:[Object(o.jsx)("span",{className:"boardmenu__content__creator__profil__infos__name",children:!_e(s)&&s.owner.pseudo}),Object(o.jsx)("span",{className:"boardmenu__content__creator__profil__infos__date",children:m()})]})]})]}),Object(o.jsxs)("div",{className:"boardmenu__content__description",children:[Object(o.jsxs)("div",{className:"boardmenu__content__description__top",children:[Object(o.jsxs)("span",{className:"boardmenu__content__title",children:[Object(o.jsx)(ge.d,{className:"boardmenu__content__title__icon"}),Object(o.jsx)("span",{className:"boardmenu__content__title__label",children:"Description"})]}),!b&&p()&&Object(o.jsxs)("button",{className:"boardmenu__content__description__top__btn-edit",onClick:function(){return j(!b)},children:[Object(o.jsx)(ge.e,{className:"boardmenu__content__description__top__btn-edit__icon"}),Object(o.jsx)("span",{children:"Edit"})]})]}),b?Object(o.jsx)(tt,{boardID:s._id,currentDescription:s.description,isOpen:b,setIsOpen:j}):Object(o.jsx)("p",{ref:c,className:"boardmenu__content__description__para"})]}),Object(o.jsxs)("div",{className:"boardmenu__content__team",children:[Object(o.jsx)("div",{className:"boardmenu__content__team__top",children:Object(o.jsxs)("span",{className:"boardmenu__content__title",children:[Object(o.jsx)(ge.d,{className:"boardmenu__content__title__icon"}),Object(o.jsx)("span",{className:"boardmenu__content__title__label",children:"Team"})]})}),Object(o.jsx)("ul",{className:"boardmenu__content__team__list",children:!_e(s)&&s.members.map((function(e,t){return Object(o.jsxs)("li",{className:"boardmenu__content__team__list__item",style:{marginBottom:t===s.members.length-1?"":"15px"},children:[Object(o.jsx)("img",{className:"boardmenu__content__team__list__item__img",src:he("user",e.picture),alt:""}),Object(o.jsx)("span",{className:"boardmenu__content__team__list__item__pseudo",children:e.pseudo}),s.owner._id===e._id?Object(o.jsx)("span",{className:"boardmenu__content__team__list__item__admin",children:"Admin"}):p()&&Object(o.jsx)("button",{className:"boardmenu__content__team__list__item__btn-remove",onClick:function(){return function(e){var t={boardID:s._id,memberBannedID:e};Re.emit("ban member",t)}(e._id)},children:"Remove"})]},e._id)}))})]}),Object(o.jsx)("button",{className:"boardmenu__content__btn-leave",onClick:function(){return function(){var e={userID:i._id,boardID:s._id};Re.emit("leave board",e)}()},children:"Leave"}),p()&&Object(o.jsx)("button",{className:"boardmenu__content__btn-delete",onClick:function(){return function(){var e=s._id;Re.emit("delete board",e)}()},children:"Delete Board"})]})]})})})},rt=function(e){var t=e.isOpen,n=e.setIsOpen,c=e.listID,a=e.onClick,s=e.isAddList,i=e.isFirstList,l=e.isFirstCard,d=e.style,b=e.scrollBottomReset,j=e.scrollLeftReset,p=Object(r.useRef)(),m=Object(r.useRef)(),O=Object(r.useState)(!1),h=Object(u.a)(O,2),f=h[0],x=h[1],v=Object(r.useState)(""),g=Object(u.a)(v,2),N=g[0],y=g[1],w=Object(_.d)((function(e){return e.userReducer})),C=Object(_.d)((function(e){return e.boardReducer.currentBoard})),I=s?f:t,D=s?x:n,R=C._id,B=function(){s||a&&a(),D(!0)};return Object(r.useEffect)((function(){var e=c;Re.on("add list",(function(e){e.listCreated,e.boardID;e.userID===w._id&&(console.log("SCROLL LEFT RESET"),m.current&&m.current.focus(),j&&j())})),Re.on("add card",(function(t){var n=t.listID,r=t.userID;e===n&&r===w._id&&(m.current&&m.current.focus(),b&&b())}))}),[C,c]),Object(r.useEffect)((function(){I&&(m.current&&m.current.focus(),j&&j(),function(e,t){window.addEventListener("mousedown",(function(n){if(!e.current)return function(){return t(!1)};!e.current.contains(n.target)&&t(!1)}))}(p,D))}),[I]),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("form",{style:d,onSubmit:function(e){return function(e){if(e.preventDefault(),!N)return m.current.focus();var t=w._id;s?Re.emit("add list",{name:N,boardID:R,userID:t}):Re.emit("add card",{name:N,boardID:R,listID:c,userID:t}),y("")}(e)},children:Object(o.jsxs)("a",{href:"#",className:"addlist ".concat(I?"addlist__open":""),onClick:function(){return B()},ref:p,children:[Object(o.jsx)("div",{className:"addlist__head",children:I?Object(o.jsx)("input",{ref:m,className:"addlist__input",value:N,onChange:function(e){return y(e.target.value)},type:"text"}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{children:"Add ".concat(i||l?"":"another"," ").concat(s?"list":"card")}),Object(o.jsx)(ge.a,{className:"addlist__head__icon"})]})}),I&&Object(o.jsxs)("button",{type:"submit",className:"addlist__btn-add",children:["Add ",s?"list":"card"]})]})})})},ct=function(){return Object(o.jsxs)("li",{className:"card",children:[Object(o.jsx)("div",{className:"card__image"}),Object(o.jsx)("span",{className:"card__title",children:"Github jobs challenge"}),Object(o.jsxs)("ul",{className:"card__category",children:[Object(o.jsx)("li",{className:"card__category__item",children:"Design"}),Object(o.jsx)("li",{className:"card__category__item",children:"Concept"})]}),Object(o.jsxs)("div",{className:"card__bottom",children:[Object(o.jsxs)("ul",{className:"card__bottom__members",children:[Object(o.jsx)("li",{className:"card__bottom__members__item"}),Object(o.jsx)("li",{children:Object(o.jsx)(j,{className:"card__bottom__members__btn-addmember",children:Object(o.jsx)(ge.a,{className:"card__bottom__members__btn-addmember__icon"})})})]}),Object(o.jsxs)("div",{className:"card__bottom__utils",children:[Object(o.jsxs)("button",{className:"card__bottom__utils__btn",children:[Object(o.jsx)(ge.c,{}),Object(o.jsx)("span",{className:"card__bottom__utils__btn__number",children:"1"})]}),Object(o.jsxs)("button",{className:"card__bottom__utils__btn",children:[Object(o.jsx)(p.d,{}),Object(o.jsx)("span",{className:"card__bottom__utils__btn__number",children:"1"})]})]})]})]})},at=function(e){var t=e._id,n=e.name,c=e.cards,a=Object(r.useRef)(),s=Object(r.useState)(!1),i=Object(u.a)(s,2),l=i[0],d=i[1],b=Object(_.d)((function(e){return e.boardReducer.currentBoard._id})),j=Object(r.useState)(!1),p=Object(u.a)(j,2),m=p[0],O=p[1],h=Object(r.useState)(!1),f=Object(u.a)(h,2),x=f[0],N=f[1],y=function(){a.current&&(a.current.scrollTop=a.current.scrollHeight)},w=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(!0);case 2:y();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Ce,{isOpen:x,setIsOpen:N,hasChoiceButton:!0,confirmMessage:"Are your sure delete this list ?",confirmFunction:function(){return Re.emit("delete list",{listID:t,boardID:b}),void N(!1)}}),Object(o.jsxs)("div",{className:"list",children:[Object(o.jsxs)("div",{className:"list__top",children:[Object(o.jsx)("span",{className:"list__top__title",children:n}),Object(o.jsx)("button",{className:"list__top__btn-menu",onClick:function(){return O(!0)},children:Object(o.jsx)(Je.a,{})}),Object(o.jsx)(xe,{top:"28px",right:"-148px",isOpen:m,setIsOpen:O,children:Object(o.jsxs)("ul",{className:"listmenu",children:[Object(o.jsx)("li",{className:"listmenu__item",children:Object(o.jsx)("button",{className:"listmenu__item__btn",children:"Rename"})}),Object(o.jsx)("li",{className:"listmenu__item listmenu__divider"}),Object(o.jsx)("li",{className:"listmenu__item",children:Object(o.jsx)("button",{className:"listmenu__item__btn",onClick:function(){return N(!0)},children:"Delete this list"})})]})})]}),Object(o.jsxs)("ul",{className:"list__content",ref:a,children:[c.map((function(e){return Object(o.jsx)(ct,{},e._id)})),l&&Object(o.jsx)(rt,{onClick:function(){return w()},isOpen:l,setIsOpen:d,listID:t,isFirstCard:_e(c)&&!0})]}),!l&&Object(o.jsx)(rt,{onClick:function(){return w()},isOpen:l,setIsOpen:d,listID:t,scrollBottomReset:y,isFirstCard:_e(c)&&!0})]})]})},st=function(e){var t=Object(r.useRef)(),n=Object(_.d)((function(e){return e.boardReducer.currentBoard.lists})),c=Object(r.useMemo)((function(){return!_e(n)&&n.map((function(e){return console.log("re render list"),Object(o.jsx)(at,Object(d.a)({},e),e._id)}))}),[n]);return Object(o.jsxs)("div",{id:"board",ref:t,children:[c,Object(o.jsx)(rt,{style:{paddingRight:"25px"},scrollLeftReset:function(){t.current&&(t.current.scrollLeft=t.current.scrollWidth)},isFirstList:_e(n)&&!0,isAddList:!0})]})},it=Object(_.b)()((function(e){var t=Object(i.g)().id,n=Object(_.d)((function(e){return e.boardReducer.currentBoard})),c=Object(_.c)(),a=Object(r.useState)(!1),s=Object(u.a)(a,2),l=s[0],d=s[1],b=Object(r.useState)(!1),p=Object(u.a)(b,2),m=p[0],O=p[1],h=Object(r.useState)(!1),f=Object(u.a)(h,2),x=f[0],N=f[1];return Object(r.useEffect)((function(){var e;return c((e=t,function(){var t=Object(g.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(T()),t.abrupt("return",E.get("/board/".concat(e),{withCredentials:!0}).then((function(e){var t=e.data;n({type:M,payload:t})})).catch((function(e){var t=e.response.data;je(t),console.log("board id error"),n({type:M,payload:"BOARD_ERROR"})})).finally((function(){n(L())})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),function(){c((function(e){return e({type:V,payload:{}})})),d(!1),O(!1),N(!1)}}),[c,t]),Object(o.jsx)(o.Fragment,{children:"BOARD_ERROR"===n?Object(o.jsx)(Ye,{}):Object(o.jsx)(Ae,{boardName:n.name,pageTitle:"Board - ".concat(n.name),isHeaderBoard:!0,children:Object(o.jsxs)("div",{className:"board",children:[Object(o.jsx)(nt,{isOpen:x,setIsOpen:N}),n.NOT_MEMBER?Object(o.jsx)("p",{className:"board__not-member",children:"This board is public , you can't interact with him if you are not member"}):Object(o.jsxs)("div",{className:"board__top",children:[Object(o.jsxs)("div",{className:"board__top__left",children:[Object(o.jsxs)("span",{children:[Object(o.jsxs)(j,{className:"board__top__left__btn-state",onClick:function(){return O(!0)},children:[Object(o.jsx)(ge.h,{className:"board__top__left__btn-state__icon"}),n.isPrivate?"Private":"Public"]}),Object(o.jsx)(Ke,{isOpen:m,setIsOpen:O})]}),Object(o.jsxs)("div",{className:"board__top__left__members",children:[Object(o.jsx)("ul",{className:"board__top__left__members__list",children:!_e(n.members)&&n.members.map((function(e){var t=e.picture,n=e._id,r=e.pseudo;return Object(o.jsx)("li",{className:"board__top__left__members__list__item",children:Object(o.jsx)("img",{src:he("user",t),alt:"".concat(r," profil"),style:{width:"100%"}})},n)}))}),Object(o.jsxs)("div",{className:"board__top__left__members__adduser-wrapper",children:[Object(o.jsx)(j,{className:"board__top__left__members__btn-adduser",onClick:function(){return d(!0)},children:Object(o.jsx)(ge.a,{})}),Object(o.jsx)(ze,{isOpen:l,setIsOpen:d})]})]})]}),Object(o.jsx)("div",{className:"board__top__right",children:Object(o.jsxs)(j,{className:"board__top__right__btn-menu",onClick:function(){return N(!0)},children:[Object(o.jsx)(Je.a,{className:"board__top__right__btn-menu__icon"}),Object(o.jsx)("span",{className:"board__top__right__btn-menu__label",children:"Show Menu"})]})})]}),Object(o.jsx)(st,{})]})})})})),ot=n(148),lt=function(e){var t=e.component,n=Object(ot.a)(e,["component"]),r=Object(_.d)((function(e){return e.userReducer}));return Object(o.jsx)(i.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return _e(!r)?Object(o.jsx)(i.a,{to:"/login"}):Object(o.jsx)(t,{})}}))},dt=function(e){var t=Object(_.d)((function(e){return e.userReducer})),n=Object(_.d)((function(e){return e.loaderReducer}));return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(s.a,{children:[!n&&_e(t)&&Object(o.jsx)(i.a,{to:"/login"}),Object(o.jsxs)(i.d,{children:[Object(o.jsx)(lt,{exact:!0,path:"/allboards",component:Pe}),Object(o.jsx)(lt,{exact:!0,path:"/board/:id",component:it}),Object(o.jsx)(i.b,{exact:!0,path:"/login",component:Ue}),Object(o.jsx)(i.b,{exact:!0,path:"/register",component:Ge}),!_e(t)&&"/"===document.location.pathname&&Object(o.jsx)(i.a,{to:"/login"}),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("h1",{children:"Error 404"})})]}),Object(o.jsx)(l,{})]})})},ut=function(e){return Object(o.jsx)("div",{className:"pageloader",children:Object(o.jsx)(We,{radius:"280"})})},_t=function(e){var t=e.icon,n=e.info,r=e.type,c=e.onClick,a=e.style;return Object(o.jsxs)("li",{style:a,className:"toast toast-".concat(r),onClick:c,children:[Object(o.jsx)("div",{className:"toast__icon",children:t}),Object(o.jsx)("span",{className:"toast__info",children:n})]})},bt=n(317),jt={position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)",zIndex:"9999999",listStyle:"none",wordBreak:"break-all",maxHeight:"100vh"},pt=function(e){var t=Object(_.d)((function(e){return e.toastReducer})),n=Object(_.c)();return Object(o.jsx)("ul",{style:jt,children:Object(o.jsx)(bt.a,{children:t.map((function(e,t){return Object(o.jsx)(ye.a,{appear:!0,timeout:300,classNames:"toast",children:Object(o.jsx)(_t,{icon:e.icon,info:e.info,type:e.type,onClick:function(){return n((t=e.id,function(e){return e({type:C,payload:t})}));var t}},t+1)},t)}))})})},mt=function(e){var t=Object(_.c)();return Object(r.useEffect)((function(){Re.on("send invitation",(function(e){var n;t((n=e,function(e){return console.log(n),e({type:ee,payload:n})}))})),Re.on("join board",(function(e){var n=e.user,r=e.board;t(function(e,t){return function(){var n=Object(g.a)(v.a.mark((function n(r){var c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,de.getState().userReducer;case 2:c=n.sent,console.log(e),r({type:U,payload:{currentUser:c,user:e,board:t}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n,r))})),Re.on("change state",(function(e){var n=e.boardID,r=e.state;t(function(e,t){return function(n){return n({type:q,payload:{boardID:e,state:t}})}}(n,r))})),Re.on("ban member",(function(e){var n=e.boardID,r=e.memberBannedID;t(function(e,t){return function(){var n=Object(g.a)(v.a.mark((function n(r){var c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,de.getState().userReducer;case 2:return c=n.sent,n.abrupt("return",r({type:Z,payload:{boardID:e,memberBannedID:t,currentUser:c}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n,r))})),Re.on("change description",(function(e){var n=e.description,r=e.boardID;console.log("change desc scktio"),t(function(e,t){return function(){var n=Object(g.a)(v.a.mark((function n(r){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r({type:W,payload:{description:e,boardID:t}}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n,r))})),Re.on("add list",(function(e){var n=e.listCreated,r=e.boardID,c=e.userID;console.log("add list scktio"),t(function(e,t,n){return function(){var r=Object(g.a)(v.a.mark((function r(c){var a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=de.getState().userReducer,console.log(a),console.log(n),r.abrupt("return",c({type:G,payload:{listCreated:e,boardID:t,userID:n,currentUser:a}}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(n,r,c))})),Re.on("add card",(function(e){var n=e.cardCreated,r=e.listID,c=e.boardID;e.userID;console.log("add card scktio"),t(function(e,t,n){return function(){var r=Object(g.a)(v.a.mark((function r(c){return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c({type:Y,payload:{cardCreated:e,listID:t,boardID:n}}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(n,r,c))})),Re.on("delete list",(function(e){var n=e.listID,r=e.boardID;console.log("delete list scktio"),t(function(e,t){return function(){var n=Object(g.a)(v.a.mark((function n(r){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r({type:K,payload:{listID:e,boardID:t}}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n,r))})),Re.on("leave board",(function(e){var n=e.userID,r=e.boardID;console.log("leave board scktio"),t(function(e,t){return function(){var n=Object(g.a)(v.a.mark((function n(r){var c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=de.getState().userReducer,n.abrupt("return",r({type:J,payload:{userID:e,boardID:t,currentUser:c}}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n,r))})),Re.on("delete board",(function(e){t(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:z,payload:{boardID:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}))}),[]),Object(o.jsx)(o.Fragment,{})},Ot=function(e){var t=Object(_.d)((function(e){return e.loaderReducer}));return Object(r.useEffect)((function(){document.querySelector("html").style=t?"overflow : hidden":"overflow : visible"}),[t]),Object(o.jsxs)("div",{className:"app",children:[t&&Object(o.jsx)(ut,{}),Object(o.jsx)(mt,{}),Object(o.jsx)(pt,{}),Object(o.jsx)(dt,{})]})},ht=(n(311),n(314));de.dispatch((function(e){e(T());var t=new N.a;E.get("/user/rememberme",{withCredentials:!0}).then((function(t){var n=t.data,r=n.user,c=n.token;return be(c),pe(Object(o.jsx)(P.b,{}),"Welcome ".concat(r.pseudo," !"),"neutral"),e(Q(r._id)),e({type:$,payload:r})})).catch((function(n){t.remove("token"),e({type:$,payload:{}}),console.log("RememberMe error : "+n)})).finally((function(){e(L())}))})),a.a.render(Object(o.jsx)(ht.a,{children:Object(o.jsx)(_.a,{store:de,children:Object(o.jsx)(Ot,{})})}),document.querySelector("#root"))}},[[312,1,2]]]);
//# sourceMappingURL=main.cd167e87.chunk.js.map